(self.webpackChunkUV=self.webpackChunkUV||[]).push([[4956],{6194:(e,t,i)=>{i.d(t,{A:()=>n});var n=function(){function e(e){this.value=e}return e.prototype.toString=function(){return this.value},e.image=new e("image"),e.page=new e("page"),e}()},6669:(e,t,i)=>{i.d(t,{N:()=>B});const n=i(7294); const s=i(745); const o=i(8650); const r=i(131); const a=i(4184); const h=i.n(a); const l=function(e){const t=e.first; const i=e.onClick; const s=e.paged; const a=e.selected; const l=e.thumb; const p=e.viewingDirection; const u=(0,r.YD)({threshold:0,rootMargin:"0px 0px 0px 0px",triggerOnce:!0}); const c=u[0]; const d=u[1];return n.createElement("div",{onClick(){return i(l)},className:h()("thumb",{first:t,placeholder:!l.uri,twoCol:s&&(p===o.Pr.LEFT_TO_RIGHT||p===o.Pr.RIGHT_TO_LEFT),oneCol:!s,selected:a}),tabIndex:0},n.createElement("div",{ref:c,className:"wrap",style:{height:`${l.height+8}px`}},d&&n.createElement("img",{src:l.uri,alt:l.label})),n.createElement("div",{className:"info"},n.createElement("span",{className:"label",title:l.label},l.label,"Â "),l.data.searchResults&&n.createElement("span",{className:"searchResults"},l.data.searchResults)))};const p=function(e){const t=e.onClick; const i=e.paged; const s=e.selected; const r=e.thumbs; const a=e.viewingDirection; const p=(0,n.useRef)(null);(0,n.useEffect)((() =>{let e; let t; const i=(e=p.current)===null||void 0===e?void 0:e.querySelector(`#thumb-${s[0]}`); const n=i==null?void 0:i.offsetTop;(t=p.current)===null||void 0===t||t.parentElement.scrollTo({top:n,left:0,behavior:"smooth"})}),[s]);const u=r.findIndex(((e) =>e.viewingHint!==o.qQ.NON_PAGED));return n.createElement("div",{ref:p,className:h()("thumbs",{"left-to-right":a===o.Pr.LEFT_TO_RIGHT,"right-to-left":a===o.Pr.RIGHT_TO_LEFT,paged:i})},r.map(((e,r) =>n.createElement("span",{key:`thumb-${r}`,id:`thumb-${r}`},n.createElement(l,{first:r===u,onClick:t,paged:i,selected:s.includes(r),thumb:e,viewingDirection:a}),function(e,t,i){return!(t!==o.qQ.NON_PAGED&&e&&(i-1)%2==0)}(i,e.viewingHint,r)&&n.createElement("div",{className:"separator"})))))};let u; const c=i(6783); const d=i(3911); const g=i(6006); const f=i(9582); const T=i(7763); const y=(u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},u(e,t)},function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError(`Class extends value ${String(t)} is not a constructor or null`);function i(){this.constructor=e}u(e,t),e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}); const b=i(9755); const w=function(e){function t(t){const i=e.call(this,t,!0,!0)||this;return i.isOpen=!1,i}return y(t,e),t.prototype.create=function(){this.setConfig("contentLeftPanel"),e.prototype.create.call(this),this.$gallery=b('<div class="iiif-gallery-component"></div>'),this.$element.append(this.$gallery)},t.prototype.setup=function(){const e=this;this.galleryComponent=new T.v({target:this.$gallery[0]}),this.galleryComponent.on("thumbSelected",((t) =>{e.extensionHost.publish(g.p.GALLERY_THUMB_SELECTED,t),e.extensionHost.publish(g.p.THUMB_SELECTED,t)}),!1),this.galleryComponent.on("decreaseSize",(() =>{e.extensionHost.publish(g.p.GALLERY_DECREASE_SIZE)}),!1),this.galleryComponent.on("increaseSize",(() =>{e.extensionHost.publish(g.p.GALLERY_INCREASE_SIZE)}),!1)},t.prototype.databind=function(){this.galleryComponent.options.data=this.galleryData,this.galleryComponent.set(this.galleryData),this.resize()},t.prototype.show=function(){const e=this;this.isOpen=!0,this.$element.show(),setTimeout((() =>{e.galleryComponent.selectIndex(e.extension.helper.canvasIndex)}),10)},t.prototype.hide=function(){this.isOpen=!1,this.$element.hide()},t.prototype.resize=function(){e.prototype.resize.call(this);const t=this.$gallery.find(".main"); const i=this.$gallery.find(".header");t.height(this.$element.height()-i.height())},t}(f.P); const E=i(9562); const m=i(6194); const v=i(8139); const N=function(){let e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if(typeof i!=="function"&&i!==null)throw new TypeError(`Class extends value ${String(i)} is not a constructor or null`);function n(){this.constructor=t}e(t,i),t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}(); const $=i(9755); const C=function(e){function t(t){const i=e.call(this,t,!0,!0)||this;return i.isOpen=!1,i}return N(t,e),t.prototype.create=function(){this.setConfig("contentLeftPanel"),e.prototype.create.call(this),this.$tree=$('<div class="iiif-tree-component"></div>'),this.$element.append(this.$tree)},t.prototype.setup=function(){const e=this;this.treeComponent=new v.TreeComponent({target:this.$tree[0],data:this.treeData}),this.treeComponent.on("treeNodeSelected",((t) =>{e.extensionHost.publish(g.p.TREE_NODE_SELECTED,t)}),!1),this.treeComponent.on("treeNodeMultiSelected",((t) =>{e.extensionHost.publish(g.p.TREE_NODE_MULTISELECTED,t)}),!1)},t.prototype.databind=function(){this.treeComponent.set(this.treeData),this.resize()},t.prototype.show=function(){this.isOpen=!0,this.$element.show()},t.prototype.hide=function(){this.isOpen=!1,this.$element.hide()},t.prototype.selectNode=function(e){this.treeComponent.selectedNode||(this.treeComponent.expandParents(e,!0),this.$tree.find(`#tree-link-${e.id}`)[0]),this.treeComponent.selectNode(e)},t.prototype.expandNode=function(e,t){this.treeComponent.expandNode(e,t)},t.prototype.getAllNodes=function(){return this.treeComponent.getAllNodes()},t.prototype.deselectCurrentNode=function(){this.treeComponent.deselectCurrentNode()},t.prototype.getNodeById=function(e){return this.treeComponent.getNodeById(e)},t.prototype.resize=function(){e.prototype.resize.call(this)},t}(f.P); const V=i(6947); const x=i(8939); const _=i(8675); const O=function(){let e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if(typeof i!=="function"&&i!==null)throw new TypeError(`Class extends value ${String(i)} is not a constructor or null`);function n(){this.constructor=t}e(t,i),t.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}(); const S=i(9755); const R=i(3911).Pr; var B=function(e){function t(t){const i=e.call(this,t)||this;return i.expandFullEnabled=!1,i.isThumbsViewOpen=!1,i.isTreeViewOpen=!1,i.treeSortType=x.pF.NONE,i}return O(t,e),t.prototype.create=function(){const t=this;this.setConfig("contentLeftPanel"),e.prototype.create.call(this),this.extensionHost.subscribe(g.p.SETTINGS_CHANGE,(() =>{t.render()})),this.extensionHost.subscribe(g.p.CANVAS_INDEX_CHANGE,(() =>{t.render()})),this.extensionHost.subscribe(g.p.GALLERY_THUMB_SELECTED,(() =>{t.collapseFull()})),this.extensionHost.subscribe(g.p.METRIC_CHANGE,(() =>{t.extension.isDesktopMetric()||t.isFullyExpanded&&t.collapseFull()})),this.extensionHost.subscribe(g.p.ANNOTATIONS,(() =>{t.renderThumbs(),t.renderGallery()})),this.extensionHost.subscribe(g.p.ANNOTATIONS_CLEARED,(() =>{t.renderThumbs(),t.renderGallery()})),this.extensionHost.subscribe(g.p.ANNOTATIONS_EMPTY,(() =>{t.renderThumbs(),t.renderGallery()})),this.extensionHost.subscribe(g.p.CANVAS_INDEX_CHANGE,(() =>{t.isFullyExpanded&&t.collapseFull(),t.selectCurrentTreeNode(),t.updateTreeTabBySelection()})),this.extensionHost.subscribe(g.p.RANGE_CHANGE,(() =>{t.isFullyExpanded&&t.collapseFull(),t.selectCurrentTreeNode(),t.updateTreeTabBySelection()})),this.$tabs=S('<div class="tabs"></div>'),this.$main.append(this.$tabs),this.$treeButton=S(`<a class="index tab" tabindex="0">${this.content.index}</a>`),this.$tabs.append(this.$treeButton),this.$thumbsButton=S(`<a class="thumbs tab" tabindex="0">${this.content.thumbnails}</a>`),this.$tabs.append(this.$thumbsButton),this.$tabsContent=S('<div class="tabsContent"></div>'),this.$main.append(this.$tabsContent),this.$options=S('<div class="options"></div>'),this.$tabsContent.append(this.$options),this.$topOptions=S('<div class="top"></div>'),this.$options.append(this.$topOptions),this.$treeSelect=S(`<select aria-label="${this.content.manifestRanges}"></select>`),this.$topOptions.append(this.$treeSelect),this.$bottomOptions=S('<div class="bottom"></div>'),this.$options.append(this.$bottomOptions),this.$leftOptions=S('<div class="left"></div>'),this.$bottomOptions.append(this.$leftOptions),this.$rightOptions=S('<div class="right"></div>'),this.$bottomOptions.append(this.$rightOptions),this.$treeViewOptions=S('<div class="treeView"></div>'),this.$leftOptions.append(this.$treeViewOptions),this.$sortByLabel=S(`<span class="sort">${this.content.sortBy}</span>`),this.$treeViewOptions.append(this.$sortByLabel),this.$sortButtonGroup=S('<div class="btn-group"></div>'),this.$treeViewOptions.append(this.$sortButtonGroup),this.$sortByDateButton=S(`<button class="btn" tabindex="0">${this.content.date}</button>`),this.$sortButtonGroup.append(this.$sortByDateButton),this.$sortByVolumeButton=S(`<button class="btn" tabindex="0">${this.content.volume}</button>`),this.$sortButtonGroup.append(this.$sortByVolumeButton),this.$views=S('<div class="views"></div>'),this.$tabsContent.append(this.$views),this.$treeView=S('<div class="treeView"></div>'),this.$views.append(this.$treeView),this.$thumbsView=S('<div class="thumbsView" tabindex="-1"></div>'),this.$views.append(this.$thumbsView),this.$galleryView=S('<div class="galleryView"></div>'),this.$views.append(this.$galleryView),this.$treeSelect.hide(),this.$treeSelect.change((() =>{t.renderTree(),t.selectCurrentTreeNode(),t.updateTreeTabBySelection()})),this.$sortByDateButton.on("click",(() =>{t.sortByDate()})),this.$sortByVolumeButton.on("click",(() =>{t.sortByVolume()})),this.$treeViewOptions.hide(),this.onAccessibleClick(this.$treeButton,(() =>{t.openTreeView()})),this.onAccessibleClick(this.$thumbsButton,(() =>{t.openThumbsView()})),this.setTitle(this.content.title),this.$sortByVolumeButton.addClass("on");let i=this.options.tabOrder;i&&((i=(i=i.toLowerCase()).replace(/ /g,"")).split(",")[0]==="thumbs"?(this.$treeButton.before(this.$thumbsButton),this.$thumbsButton.addClass("first")):this.$treeButton.addClass("first"))},t.prototype.createTreeView=function(){this.treeView=new C(this.$treeView),this.treeView.treeData=this.getTreeData(),this.treeView.setup(),this.renderTree();const e=this.extension.helper.getTopRanges();if(e.length>1)for(let t=0;t<e.length;t++){const i=e[t];this.$treeSelect.append(`<option value="${i.id}">${V.LanguageMap.getValue(i.getLabel())}</option>`)}this.updateTreeViewOptions()},t.prototype.render=function(){this.renderThumbs(),this.renderTree(),this.renderGallery()},t.prototype.updateTreeViewOptions=function(){const e=this.getTree();e&&(this.isCollection()&&this.extension.helper.treeHasNavDates(e)?this.$treeViewOptions.show():this.$treeViewOptions.hide(),this.$treeSelect.find("option").length?this.$treeSelect.show():this.$treeSelect.hide())},t.prototype.sortByDate=function(){this.treeSortType=x.pF.DATE,this.treeView.treeData=this.getTreeData(),this.treeView.databind(),this.selectCurrentTreeNode(),this.$sortByDateButton.addClass("on"),this.$sortByVolumeButton.removeClass("on"),this.resize()},t.prototype.sortByVolume=function(){this.treeSortType=x.pF.NONE,this.treeView.treeData=this.getTreeData(),this.treeView.databind(),this.selectCurrentTreeNode(),this.$sortByDateButton.removeClass("on"),this.$sortByVolumeButton.addClass("on"),this.resize()},t.prototype.isCollection=function(){const e=this.getTree();if(e)return e.data.type===V.TreeNodeType.COLLECTION;throw new Error("Tree not available")},t.prototype.renderTree=function(){this.treeView&&(this.treeView.treeData=this.getTreeData(),this.treeView.databind(),this.selectCurrentTreeNode())},t.prototype.getTreeData=function(){return{autoExpand:this._isTreeAutoExpanded(),branchNodesExpandOnClick:c.RS.getBool(this.config.options.branchNodesExpandOnClick,!0),branchNodesSelectable:c.RS.getBool(this.config.options.branchNodesSelectable,!1),helper:this.extension.helper,topRangeIndex:this.getSelectedTopRangeIndex(),treeSortType:this.treeSortType}},t.prototype._isTreeAutoExpanded=function(){const e=c.RS.getBool(this.config.options.autoExpandTreeEnabled,!1); const t=this.config.options.autoExpandTreeIfFewerThan||0;if(e){const i=this.extension.helper.getFlattenedTree();if(i&&i.length<t)return!0}return!1},t.prototype.updateTreeTabByCanvasIndex=function(){const e=this.extension.helper.getTopRanges();if(e.length>1){const t=this.getCurrentCanvasTopRangeIndex();if(t===-1)return;const i=e[t];this.setTreeTabTitle(V.LanguageMap.getValue(i.getLabel()))}else this.setTreeTabTitle(this.content.index)},t.prototype.setTreeTabTitle=function(e){this.$treeButton.text(e)},t.prototype.updateTreeTabBySelection=function(){let e=null; const t=this.extension.helper.getTopRanges();t.length>1&&(e=this.treeView?this.getSelectedTree().text():V.LanguageMap.getValue(t[0].getLabel())),e?this.setTreeTabTitle(e):this.setTreeTabTitle(this.content.index)},t.prototype.getViewingHint=function(){return this.extension.helper.getViewingHint()},t.prototype.getViewingDirection=function(){return this.extension.helper.getViewingDirection()},t.prototype.createThumbsRoot=function(){this.thumbsRoot||(this.thumbsRoot=(0,s.s)(this.$thumbsView[0])),this.renderThumbs()},t.prototype.renderThumbs=function(){const e=this;if(this.thumbsRoot){const t=this.getViewingDirection(); const i=this.extension.helper.getThumbs(90);t&&t===R.BOTTOM_TO_TOP&&i.reverse();const s=this.extension.annotations;if(s&&s.length)for(let o=function(e){const t=s[e]; const n=i.filter(((e) =>e.index===t.canvasIndex))[0];if(n){const o=Object.assign({},n.data);o.searchResults=t.rects.length,n.data=o}},r=0;r<s.length;r++)o(r);const a=!!this.extension.getSettings().pagingEnabled&&this.extension.helper.isPaged(); const h=this.extension.getPagedIndices(this.extension.helper.canvasIndex);this.thumbsRoot.render((0,n.createElement)(p,{thumbs:i,paged:a,viewingDirection:t||d.Pr.LEFT_TO_RIGHT,selected:h,onClick(t){e.extensionHost.publish(g.p.THUMB_SELECTED,t)}}))}},t.prototype.createGalleryView=function(){this.galleryView=new w(this.$galleryView),this.galleryView.galleryData=this.getGalleryData(),this.galleryView.setup(),this.renderGallery()},t.prototype.renderGallery=function(){this.galleryView&&(this.galleryView.galleryData=this.getGalleryData(),this.galleryView.databind())},t.prototype.getGalleryData=function(){return{helper:this.extension.helper,chunkedResizingThreshold:this.config.options.galleryThumbChunkedResizingThreshold,content:this.config.content,debug:!1,imageFadeInDuration:300,initialZoom:6,minLabelWidth:20,pageModeEnabled:this.isPageModeEnabled(),scrollStopDuration:100,searchResults:this.extension.annotations,sizingEnabled:!0,thumbHeight:this.config.options.galleryThumbHeight,thumbLoadPadding:this.config.options.galleryThumbLoadPadding,thumbWidth:this.config.options.galleryThumbWidth,viewingDirection:this.getViewingDirection()}},t.prototype.isPageModeEnabled=function(){return typeof this.extension.getMode==="function"?c.RS.getBool(this.config.options.pageModeEnabled,!0)&&this.extension.getMode().toString()===m.A.page.toString():c.RS.getBool(this.config.options.pageModeEnabled,!0)},t.prototype.getSelectedTree=function(){return this.$treeSelect.find(":selected")},t.prototype.getSelectedTopRangeIndex=function(){let e=this.getSelectedTree().index();return e===-1&&(e=0),e},t.prototype.getTree=function(){const e=this.getSelectedTopRangeIndex();return this.extension.helper.getTree(e,x.pF.NONE)},t.prototype.toggleFinish=function(){if(e.prototype.toggleFinish.call(this),this.isUnopened){let t=c.RS.getBool(this.config.options.treeEnabled,!0); const i=c.RS.getBool(this.config.options.thumbsEnabled,!0); const n=this.getTree();n&&n.nodes.length||(t=!1),t&&i||this.$tabs.hide(),i&&this.defaultToThumbsView()?this.openThumbsView():t&&this.openTreeView()}},t.prototype.defaultToThumbsView=function(){const e=c.RS.getBool(this.config.options.defaultToTreeEnabled,!1); const t=this.config.options.defaultToTreeIfGreaterThan||0; const i=this.getTree();return!(e&&i&&i.nodes.length>t)},t.prototype.expandFullStart=function(){e.prototype.expandFullStart.call(this),this.extensionHost.publish(g.p.LEFTPANEL_EXPAND_FULL_START)},t.prototype.expandFullFinish=function(){e.prototype.expandFullFinish.call(this),this.$treeButton.hasClass("on")?this.openTreeView():this.$thumbsButton.hasClass("on")&&this.openThumbsView(),this.extensionHost.publish(g.p.LEFTPANEL_EXPAND_FULL_FINISH)},t.prototype.collapseFullStart=function(){e.prototype.collapseFullStart.call(this),this.extensionHost.publish(g.p.LEFTPANEL_COLLAPSE_FULL_START)},t.prototype.collapseFullFinish=function(){e.prototype.collapseFullFinish.call(this),this.$thumbsButton.hasClass("on")&&this.openThumbsView(),this.extensionHost.publish(g.p.LEFTPANEL_COLLAPSE_FULL_FINISH)},t.prototype.openTreeView=function(){this.isTreeViewOpen=!0,this.isThumbsViewOpen=!1,this.treeView||this.createTreeView(),this.$treeButton.addClass("on"),this.$thumbsButton.removeClass("on"),this.treeView.show(),this.$thumbsView&&this.$thumbsView.hide(),this.galleryView&&this.galleryView.hide(),this.updateTreeViewOptions(),this.selectCurrentTreeNode(),this.resize(),this.treeView.resize(),this.extensionHost.publish(g.p.OPEN_TREE_VIEW)},t.prototype.openThumbsView=function(){this.isTreeViewOpen=!1,this.isThumbsViewOpen=!0,this.createThumbsRoot(),this.isFullyExpanded&&!this.galleryView&&this.createGalleryView(),this.$treeButton.removeClass("on"),this.$thumbsButton.addClass("on"),this.treeView&&this.treeView.hide(),this.$treeSelect.hide(),this.$treeViewOptions.hide(),this.resize(),this.isFullyExpanded?(this.$thumbsView.hide(),this.galleryView&&this.galleryView.show(),this.galleryView&&this.galleryView.resize()):(this.galleryView&&this.galleryView.hide(),this.$thumbsView.show(),this.$thumbsView.resize()),this.extensionHost.publish(g.p.OPEN_THUMBS_VIEW)},t.prototype.selectTopRangeIndex=function(e){this.$treeSelect.prop("selectedIndex",e)},t.prototype.getCurrentCanvasTopRangeIndex=function(){let e=-1; const t=this.extension.getCurrentCanvasRange();return t&&(e=Number(t.path.split("/")[0])),e},t.prototype.selectCurrentTreeNode=function(){let e;((e=this.extension.type)===null||void 0===e?void 0:e.name)==="uv-openseadragon-extension"?this.selectCurrentTreeNodeByCanvas():this.selectCurrentTreeNodeByRange()},t.prototype.selectCurrentTreeNodeByRange=function(){if(this.treeView){const e=this.extension.helper.getCurrentRange(); let t=null;e&&e.treeNode&&(t=this.treeView.getNodeById(e.treeNode.id)),t?this.treeView.selectNode(t):this.selectTreeNodeByManifest()}},t.prototype.selectCurrentTreeNodeByCanvas=function(){if(this.treeView){let e=null; const t=this.getCurrentCanvasTopRangeIndex(); const i=t===this.getSelectedTopRangeIndex(); let n=null;t!==-1&&(n=this.extension.getCurrentCanvasRange())&&n.treeNode&&(e=this.treeView.getNodeById(n.treeNode.id)),e&&i?this.treeView.selectNode(e):((n=this.extension.helper.getCurrentRange())&&n.treeNode&&(e=this.treeView.getNodeById(n.treeNode.id)),e?this.treeView.selectNode(e):this.selectTreeNodeByManifest())}},t.prototype.selectTreeNodeByManifest=function(){const e=this; const t=this.extension.helper.collectionIndex; const i=this.extension.helper.manifestIndex; const n=this.treeView.getAllNodes(); let s=!1;n.map(((n) =>{n.isCollection()&&n.data.index===t&&(e.treeView.selectNode(n),e.treeView.expandNode(n,!0),s=!0),n.isManifest()&&n.data.index===i&&(e.treeView.selectNode(n),s=!0)})),s||this.treeView.deselectCurrentNode()},t.prototype.resize=function(){e.prototype.resize.call(this),this.$tabsContent.height(this.$main.height()-((0,_.pn)(this.$tabs)?this.$tabs.height():0)-this.$tabsContent.verticalPadding()),this.$views.height(this.$tabsContent.height()-this.$options.outerHeight())},t}(E.W)},5309:(e,t,i)=>{let n;i.d(t,{h:()=>n}),function(e){e.CANVAS_RENDERINGS="canvasRenderings",e.CURRENT_VIEW="currentView",e.ENTIRE_DOCUMENT_AS_PDF="entireDocumentAsPdf",e.ENTIRE_DOCUMENT_AS_TEXT="entireDocumentAsText",e.ENTIRE_FILE_AS_ORIGINAL="entireFileAsOriginal",e.IMAGE_RENDERINGS="imageRenderings",e.MANIFEST_RENDERINGS="manifestRenderings",e.RANGE_RENDERINGS="rangeRenderings",e.SELECTION="selection",e.UNKNOWN="unknown",e.WHOLE_IMAGE_HIGH_RES="wholeImageHighRes",e.WHOLE_IMAGE_LOW_RES="wholeImageLowRes",e.WHOLE_IMAGES_HIGH_RES="wholeImagesHighRes"}(n||(n={}))}}]);