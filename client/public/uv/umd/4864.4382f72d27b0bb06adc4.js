/*! For license information please see 4864.4382f72d27b0bb06adc4.js.LICENSE.txt */
(self.webpackChunkUV=self.webpackChunkUV||[]).push([[4864],{2084:e=>{window,e.exports=function(e){const t={};function n(r){if(t[r])return t[r].exports;const i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){typeof Symbol!=="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&typeof e==="object"&&e&&e.__esModule)return e;const r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&typeof e!=="string")for(const i in e)n.d(r,i,((t) =>e[t]).bind(null,i));return r},n.n=function(e){const t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}])},8939:(e,t,n)=>{n.d(t,{ll:()=>a,LH:()=>v,pF:()=>r,x0:()=>_,UG:()=>y});let r; const i=function(e){this.isVisible=!0;const t=e.target.match(/.*[^n]xyz=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/); const n=e.target.match(/.*nxyz=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/);this.bodyValue=e.bodyValue,this.x=Number(t[1]),this.y=Number(t[2]),this.z=Number(t[3]),this.nx=Number(n[1]),this.ny=Number(n[2]),this.nz=Number(n[3])}; const o=function(e){let t;this.isVisible=!0,e.on?(t=e.on.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/),this.chars=e.resource.chars):(t=e.target.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/),this.chars=e.bodyValue),this.x=Number(t[1]),this.y=Number(t[2]),this.width=Number(t[3]),this.height=Number(t[4])}; var a=function(){function e(e){this.rects=[],this.points3D=[],this.canvasId=e}return e.prototype.addRect=function(e){const t=new o(e);t.canvasId=this.canvasId,t.canvasIndex=this.canvasIndex,t.index=this.rects.length,this.rects.push(t),this.rects.sort(((e,t) =>e.index-t.index))},e.prototype.addPoint3D=function(e){const t=new i(e);t.canvasId=this.canvasId,t.canvasIndex=this.canvasIndex,t.index=this.points3D.length,this.points3D.push(t),this.points3D.sort(((e,t) =>e.index-t.index))},e}(); const s=n(6947); const l=function(){function e(){this.isEnabled=!1,this.ranges=[],this.canvases=[]}return e.prototype.allCanvasesSelected=function(){return this.canvases.length>0&&this.getAllSelectedCanvases().length===this.canvases.length},e.prototype.allRangesSelected=function(){return this.ranges.length>0&&this.getAllSelectedRanges().length===this.ranges.length},e.prototype.allSelected=function(){return this.allRangesSelected()&&this.allCanvasesSelected()},e.prototype.getAll=function(){return this.canvases.concat(this.ranges)},e.prototype.getAllSelectedCanvases=function(){return this.canvases.filter(((e) =>e.multiSelected))},e.prototype.getAllSelectedRanges=function(){return this.ranges.filter(((e) =>e.multiSelected))},e.prototype.getCanvasById=function(e){return this.canvases.filter(((t) =>s.Utils.normaliseUrl(t.id)===s.Utils.normaliseUrl(e)))[0]},e.prototype.getCanvasesByIds=function(e){for(var t=[],n=0;n<e.length;n++){const r=e[n];t.push(this.getCanvasById(r))}return t},e.prototype.getRangeCanvases=function(e){const t=e.getCanvasIds();return this.getCanvasesByIds(t)},e.prototype.selectAll=function(e){this.selectRanges(this.ranges,e),this.selectCanvases(this.canvases,e)},e.prototype.selectCanvas=function(e,t){this.canvases.filter(((t) =>t.id===e.id))[0].multiSelected=t},e.prototype.selectAllCanvases=function(e){this.selectCanvases(this.canvases,e)},e.prototype.selectCanvases=function(e,t){for(let n=0;n<e.length;n++)e[n].multiSelected=t},e.prototype.selectRange=function(e,t){const n=this.ranges.filter(((t) =>t.id===e.id))[0];n.multiSelected=t;const r=this.getRangeCanvases(n);this.selectCanvases(r,t)},e.prototype.selectAllRanges=function(e){this.selectRanges(this.ranges,e)},e.prototype.selectRanges=function(e,t){for(let n=0;n<e.length;n++){const r=e[n];r.multiSelected=t;const i=this.getCanvasesByIds(r.getCanvasIds());this.selectCanvases(i,t)}},e.prototype.setEnabled=function(e){this.isEnabled=e;for(let t=this.getAll(),n=0;n<t.length;n++){const r=t[n];r.multiSelectEnabled=this.isEnabled,e||(r.multiSelected=!1)}},e}(); const u=function(){function e(e,t){this.items=[],this.resource=e,this.label=t}return e.prototype.addItem=function(e){this.items.push(e)},e.prototype.addMetadata=function(e,t){void 0===t&&(t=!1);for(let n=0;n<e.length;n++){const r=e[n];r.isRootLevel=t,this.addItem(r)}},e}();!function(e){e.DATE="date",e.NONE="none"}(r||(r={}));const c=n(3911); const p=function(){function e(){}return e.manifestNotLoaded="Manifest has not loaded yet",e}(); let f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(const i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},f.apply(this,arguments)}; const h=function(){function e(e){if(this.options=e,this.iiifResource=this.options.iiifResource,this.manifestUri=this.options.manifestUri,this.manifest=this.options.manifest,this.collectionIndex=this.options.collectionIndex||0,this.manifestIndex=this.options.manifestIndex||0,this.sequenceIndex=this.options.sequenceIndex||0,this.canvasIndex=this.options.canvasIndex||0,this.options.canvasId){const t=this.getCanvasIndexById(this.options.canvasId);t!==null&&(this.canvasIndex=t)}}return e.prototype.getAutoCompleteService=function(){const e=this.getSearchService(); let t=null;return e&&((t=e.getService(c.vl.SEARCH_0_AUTO_COMPLETE))||(t=e.getService(c.vl.SEARCH_1_AUTO_COMPLETE))),t},e.prototype.getAttribution=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);const e=this.manifest.getAttribution();return e?e.getValue(this.options.locale):null},e.prototype.getCanvases=function(){return this.getCurrentSequence().getCanvases()},e.prototype.getCanvasById=function(e){return this.getCurrentSequence().getCanvasById(e)},e.prototype.getCanvasesById=function(e){for(var t=[],n=0;n<e.length;n++){const r=e[n]; const i=this.getCanvasById(r);i&&t.push(i)}return t},e.prototype.getCanvasByIndex=function(e){return this.getCurrentSequence().getCanvasByIndex(e)},e.prototype.getCanvasIndexById=function(e){return this.getCurrentSequence().getCanvasIndexById(e)},e.prototype.getCanvasIndexByLabel=function(e){const t=this.getManifestType()===s.ManifestType.MANUSCRIPT;return this.getCurrentSequence().getCanvasIndexByLabel(e,t)},e.prototype.getCanvasRange=function(e,t){const n=this.getCanvasRanges(e);if(t){for(let r=0;r<n.length;r++){const i=n[r];if(i.path===t)return i}return null}return n[0]},e.prototype.getCanvasRanges=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return e.ranges||(e.ranges=this.manifest.getAllRanges().filter(((t) =>t.getCanvasIds().some(((t) =>s.Utils.normaliseUrl(t)===s.Utils.normaliseUrl(e.id)))))),e.ranges},e.prototype.getCollectionIndex=function(e){if(!e.parentCollection||e.parentCollection.parentCollection)return e.parentCollection?e.parentCollection.index:void 0},e.prototype.getCurrentCanvas=function(){return this.getCurrentSequence().getCanvasByIndex(this.canvasIndex)},e.prototype.getCurrentSequence=function(){return this.getSequenceByIndex(this.sequenceIndex)},e.prototype.getDescription=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);const e=this.manifest.getDescription();return e?e.getValue(this.options.locale):null},e.prototype.getLabel=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);const e=this.manifest.getLabel();return e?e.getValue(this.options.locale):null},e.prototype.getLastCanvasLabel=function(e){return this.getCurrentSequence().getLastCanvasLabel(e)},e.prototype.getFirstPageIndex=function(){return 0},e.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},e.prototype.getLicense=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getLicense()},e.prototype.getLogo=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getLogo()},e.prototype.getManifestType=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);let e=this.manifest.getManifestType();return e===s.ManifestType.EMPTY&&(e=s.ManifestType.MONOGRAPH),e},e.prototype.getMetadata=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);const t=[]; const n=this.manifest.getMetadata(); const r=new u(this.manifest); const i=this.options.locale;n&&n.length&&r.addMetadata(n,!0),this.manifest.getDescription().length&&((o=new s.LabelValuePair(i)).label=new s.PropertyValue([new s.LocalizedValue("description",i)]),o.value=this.manifest.getDescription(),o.isRootLevel=!0,r.addItem(o)),this.manifest.getAttribution().length&&((o=new s.LabelValuePair(i)).label=new s.PropertyValue([new s.LocalizedValue("attribution",i)]),o.value=this.manifest.getAttribution(),o.isRootLevel=!0,r.addItem(o));let o; const a=this.manifest.getLicense();if(a){var l={label:"license",value:e&&e.licenseFormatter?e.licenseFormatter.format(a):a};(o=new s.LabelValuePair(i)).parse(l),o.isRootLevel=!0,r.addItem(o)}this.manifest.getLogo()&&(l={label:"logo",value:`<img alt="logo" src="${this.manifest.getLogo()}"/>`},(o=new s.LabelValuePair(i)).parse(l),o.isRootLevel=!0,r.addItem(o));return t.push(r),e?this._parseMetadataOptions(e,t):t},e.prototype.getAllRequiredStatements=function(){const e=[]; const t=this.getCurrentRange();if(t){const n=t.getRequiredStatement?t.getRequiredStatement():null;n&&e.push(f(f({},this.parseStatement(n)),{source:"Range"}))}const r=this.getCurrentCanvas();if(r){const i=r.getRequiredStatement?r.getRequiredStatement():null;i&&e.push(f(f({},this.parseStatement(i)),{source:"Canvas"}))}if(this.manifest){const o=this.manifest.getRequiredStatement();o&&o&&e.push(f(f({},this.parseStatement(o)),{source:"Manifest"}))}return e},e.prototype.getMostSpecificRequiredStatement=function(){const e=this.getAllRequiredStatements(); const t=e.find(((e) =>e.source==="Range"));if(t)return t;const n=e.find(((e) =>e.source==="Canvas"));return n||(e.find(((e) =>e.source==="Manifest"))||null)},e.prototype.getRequiredStatement=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);const e=this.manifest.getRequiredStatement();return e?this.parseStatement(e):null},e.prototype.parseStatement=function(e){return{label:e.label?e.getLabel():"",value:e.value&&e.value.length?e.getValue():""}},e.prototype._parseMetadataOptions=function(e,t){const n=this.getCurrentSequence(); const r=n.getMetadata();if(r&&r.length){const i=new u(n);i.addMetadata(r),t.push(i)}if(e.range){let o=this._getRangeMetadata([],e.range);o=o.reverse(),t=t.concat(o)}if(e.canvases&&e.canvases.length)for(let a=0;a<e.canvases.length;a++){const s=e.canvases[a]; const l=s.getMetadata();if(l&&l.length){const c=new u(s);c.addMetadata(s.getMetadata()),t.push(c)}for(let p=s.getImages(),f=0;f<p.length;f++){const h=p[f]; const d=h.getMetadata();if(d&&d.length){const g=new u(h);g.addMetadata(d),t.push(g)}}}return t},e.prototype._getRangeMetadata=function(e,t){const n=t.getMetadata();if(n&&n.length){const r=new u(t);r.addMetadata(n),e.push(r)}else if(t.parentRange)return this._getRangeMetadata(e,t.parentRange);return e},e.prototype.getMultiSelectState=function(){return this._multiSelectState||(this._multiSelectState=new l,this._multiSelectState.ranges=this.getRanges().slice(0),this._multiSelectState.canvases=this.getCurrentSequence().getCanvases().slice(0)),this._multiSelectState},e.prototype.getCurrentRange=function(){return this.rangeId?this.getRangeById(this.rangeId):null},e.prototype.getPosterCanvas=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getPosterCanvas()},e.prototype.getAccompanyingCanvas=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getAccompanyingCanvas()},e.prototype.getPosterImage=function(){const e=this.getPosterCanvas();if(e){const t=e.getContent();if(t&&t.length)return t[0].getBody()[0].id}return null},e.prototype.getAccompanyingCanvasImage=function(){const e=this.getAccompanyingCanvas();if(e){const t=e.getContent();if(t&&t.length)return t[0].getBody()[0].id}return null},e.prototype.getPreviousRange=function(e){let t;if(t=e||this.getCurrentRange()){const n=this.getFlattenedTree();if(n)for(let r=0;r<n.length;r++){const i=n[r];if(i&&i.data.id===t.id){for(;r>0;)return n[--r].data;break}}}return null},e.prototype.getNextRange=function(e){let t;if(t=e||this.getCurrentRange()){const n=this.getFlattenedTree();if(n)for(let r=0;r<n.length;r++){const i=n[r];if(i&&i.data.id===t.id){for(;r<n.length-1;){const o=n[++r];if(o.data.canvases&&o.data.canvases.length)return o.data}break}}}return null},e.prototype.getFlattenedTree=function(e){let t;return(t=e||this.getTree())?this._flattenTree(t,"nodes"):null},e.prototype._flattenTree=function(e,t){const n=this; const r=[e];return e[t]&&e[t].length>0?r.concat(e[t].map(((e) =>n._flattenTree(e,t))).reduce(((e,t) =>e.concat(t)),[])):r},e.prototype.getRanges=function(){return this.manifest.getAllRanges()},e.prototype.getRangeByPath=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRangeByPath(e)},e.prototype.getRangeById=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRangeById(e)},e.prototype.getRangeCanvases=function(e){const t=e.getCanvasIds();return this.getCanvasesById(t)},e.prototype.getRelated=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getRelated()},e.prototype.getSearchService=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);let e=this.manifest.getService(c.vl.SEARCH_0);return e||(e=this.manifest.getService(c.vl.SEARCH_1)),e},e.prototype.getSeeAlso=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getSeeAlso()},e.prototype.getSequenceByIndex=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getSequenceByIndex(e)},e.prototype.getShareServiceUrl=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);let e=null; let t=this.manifest.getService(c.vl.SHARE_EXTENSIONS);return t&&(t.length&&(t=t[0]),e=t.__jsonld.shareUrl),e},e.prototype._getSortedTreeNodesByDate=function(e,t){const n=this.getFlattenedTree(t);if(n){const r=n.filter(((e) =>e.data.type===s.TreeNodeType.MANIFEST));this.createDecadeNodes(e,n),this.sortDecadeNodes(e),this.createYearNodes(e,n),this.sortYearNodes(e),this.createMonthNodes(e,r),this.sortMonthNodes(e),this.createDateNodes(e,r),this.pruneDecadeNodes(e)}},e.prototype.getStartCanvasIndex=function(){return this.getCurrentSequence().getStartCanvasIndex()},e.prototype.getThumbs=function(e,t){return this.getCurrentSequence().getThumbs(e,t)},e.prototype.getTopRanges=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getTopRanges()},e.prototype.getTotalCanvases=function(){return this.getCurrentSequence().getTotalCanvases()},e.prototype.getTrackingLabel=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.getTrackingLabel()},e.prototype._getTopRanges=function(){return this.iiifResource.getTopRanges()},e.prototype.getTree=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=r.NONE),!this.iiifResource)return null;let n;if(this.iiifResource.isCollection())n=this.iiifResource.getDefaultTree();else{const i=this._getTopRanges(); const o=new s.TreeNode;if(o.label="root",o.data=this.iiifResource,!i.length)return o;n=i[e].getTree(o)}const a=new s.TreeNode;return t.toString()===r.DATE.toString()&&this.treeHasNavDates(n)?(this._getSortedTreeNodesByDate(a,n),a):n},e.prototype.treeHasNavDates=function(e){const t=this.getFlattenedTree(e);return!!t&&t.some(((e) =>!isNaN(e.navDate)))},e.prototype.getViewingDirection=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);let e=this.getCurrentSequence().getViewingDirection();return e||(e=this.manifest.getViewingDirection()),e},e.prototype.getViewingHint=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);let e=this.getCurrentSequence().getViewingHint();return e||(e=this.manifest.getViewingHint()),e},e.prototype.hasParentCollection=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return!!this.manifest.parentCollection},e.prototype.hasRelatedPage=function(){let e=this.getRelated();return!!e&&(e.length&&(e=e[0]),e.format==="text/html")},e.prototype.hasResources=function(){return this.getCurrentCanvas().getResources().length>0},e.prototype.isBottomToTop=function(){const e=this.getViewingDirection();return!!e&&e===c.Pr.BOTTOM_TO_TOP},e.prototype.isCanvasIndexOutOfRange=function(e){return this.getCurrentSequence().isCanvasIndexOutOfRange(e)},e.prototype.isContinuous=function(){const e=this.getViewingHint();return!!e&&e===c.qQ.CONTINUOUS},e.prototype.isFirstCanvas=function(e){return void 0!==e?this.getCurrentSequence().isFirstCanvas(e):this.getCurrentSequence().isFirstCanvas(this.canvasIndex)},e.prototype.isHorizontallyAligned=function(){return this.isLeftToRight()||this.isRightToLeft()},e.prototype.isLastCanvas=function(e){return void 0!==e?this.getCurrentSequence().isLastCanvas(e):this.getCurrentSequence().isLastCanvas(this.canvasIndex)},e.prototype.isLeftToRight=function(){const e=this.getViewingDirection();return!!e&&e===c.Pr.LEFT_TO_RIGHT},e.prototype.isMultiCanvas=function(){return this.getCurrentSequence().isMultiCanvas()},e.prototype.isMultiSequence=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.isMultiSequence()},e.prototype.isPaged=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);const e=this.getViewingHint();return e?e===c.qQ.PAGED:this.manifest.isPagingEnabled()},e.prototype.isPagingAvailable=function(){return this.isPagingEnabled()&&this.getTotalCanvases()>2},e.prototype.isPagingEnabled=function(){if(!this.manifest)throw new Error(p.manifestNotLoaded);return this.manifest.isPagingEnabled()||this.getCurrentSequence().isPagingEnabled()},e.prototype.isRightToLeft=function(){const e=this.getViewingDirection();return!!e&&e===c.Pr.RIGHT_TO_LEFT},e.prototype.isTopToBottom=function(){const e=this.getViewingDirection();return!!e&&e===c.Pr.TOP_TO_BOTTOM},e.prototype.isTotalCanvasesEven=function(){return this.getCurrentSequence().isTotalCanvasesEven()},e.prototype.isUIEnabled=function(e){if(!this.manifest)throw new Error(p.manifestNotLoaded);const t=this.manifest.getService(c.vl.UI_EXTENSIONS);if(t){const n=t.getProperty("disableUI");if(n&&(n.indexOf(e)!==-1||n.indexOf(e.toLowerCase())!==-1))return!1}return!0},e.prototype.isVerticallyAligned=function(){return this.isTopToBottom()||this.isBottomToTop()},e.prototype.createDateNodes=function(e,t){for(let n=0;n<t.length;n++){const r=t[n]; const i=this.getNodeYear(r); const o=this.getNodeMonth(r); const a=new s.TreeNode;a.id=r.id,a.label=this.getNodeDisplayDate(r),a.data=r.data,a.data.type=s.TreeNodeType.MANIFEST,a.data.year=i,a.data.month=o;const l=this.getDecadeNode(e,i);if(l){const u=this.getYearNode(l,i);if(u){const c=this.getMonthNode(u,o);c&&c.addNode(a)}}}},e.prototype.createDecadeNodes=function(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(r.navDate){const i=this.getNodeYear(r); const o=Number(`${i.toString().substr(0,3)}9`);if(!this.getDecadeNode(e,i)){const a=new s.TreeNode;a.label=`${i} - ${o}`,a.navDate=r.navDate,a.data.startYear=i,a.data.endYear=o,e.addNode(a)}}}},e.prototype.createMonthNodes=function(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(r.navDate){const i=this.getNodeYear(r); const o=this.getNodeMonth(r); const a=this.getDecadeNode(e,i); let l=null;if(a&&(l=this.getYearNode(a,i)),a&&l&&!this.getMonthNode(l,o)){const u=new s.TreeNode;u.label=this.getNodeDisplayMonth(r),u.navDate=r.navDate,u.data.year=i,u.data.month=o,l.addNode(u)}}}},e.prototype.createYearNodes=function(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(r.navDate){const i=this.getNodeYear(r); const o=this.getDecadeNode(e,i);if(o&&!this.getYearNode(o,i)){const a=new s.TreeNode;a.label=i.toString(),a.navDate=r.navDate,a.data.year=i,o.addNode(a)}}}},e.prototype.getDecadeNode=function(e,t){for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(t>=r.data.startYear&&t<=r.data.endYear)return r}return null},e.prototype.getMonthNode=function(e,t){for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(t===this.getNodeMonth(r))return r}return null},e.prototype.getNodeDisplayDate=function(e){return e.navDate.toDateString()},e.prototype.getNodeDisplayMonth=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e.navDate.getMonth()]},e.prototype.getNodeMonth=function(e){return e.navDate.getMonth()},e.prototype.getNodeYear=function(e){return e.navDate.getFullYear()},e.prototype.getYearNode=function(e,t){for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(t===this.getNodeYear(r))return r}return null},e.prototype.pruneDecadeNodes=function(e){for(var t=[],n=0;n<e.nodes.length;n++){const r=e.nodes[n];r.nodes.length||t.push(r)}for(let i=0;i<t.length;i++){const o=t[i]; const a=e.nodes.indexOf(o);a>-1&&e.nodes.splice(a,1)}},e.prototype.sortDecadeNodes=function(e){e.nodes=e.nodes.sort(((e,t) =>e.data.startYear-t.data.startYear))},e.prototype.sortMonthNodes=function(e){for(var t=this,n=0;n<e.nodes.length;n++)for(let r=e.nodes[n],i=0;i<r.nodes.length;i++){const o=r.nodes[i];o.nodes=o.nodes.sort(((e,n) =>t.getNodeMonth(e)-t.getNodeMonth(n)))}},e.prototype.sortYearNodes=function(e){for(var t=this,n=0;n<e.nodes.length;n++){const r=e.nodes[n];r.nodes=r.nodes.sort(((e,n) =>t.getNodeYear(e)-t.getNodeYear(n)))}},e}(); const d=function(){function e(e){this._options=e,this._options.locale=this._options.locale||"en-GB"}return e.prototype.bootstrap=function(e,t){const n=this;return new Promise(((r,i) =>{e&&t&&(r=e,i=t),s.Utils.loadManifest(n._options.manifestUri).then(((e) =>{n._loaded(n,e,r,i)})).catch(((e) =>{i(e)}))}))},e.prototype._loaded=function(e,t,n,r){const i=s.Utils.parseManifest(t,{locale:e._options.locale});if(i){e._options.iiifResource||(e._options.iiifResource=i);let o=e._options.collectionIndex; const a=e._options.manifestIndex;if(i.getIIIFResourceType()===c.mU.COLLECTION){const l=i.getManifests(); const u=i.getCollections();l.length||void 0!==o||(o=0),void 0!==o&&u&&u.length?i.getCollectionByIndex(o).then(((t) =>{t||r("Collection index not found"),t.getTotalManifests()===0&&a===0&&t.getTotalCollections()>0?(e._options.collectionIndex=0,e._options.manifestUri=t.id,e.bootstrap(n,r)):void 0!==a&&t.getManifestByIndex(a).then(((t) =>{e._options.manifest=t;const r=new h(e._options);n(r)}))})):i.getManifestByIndex(e._options.manifestIndex).then(((t) =>{e._options.manifest=t;const r=new h(e._options);n(r)}))}else{e._options.manifest=i;const p=new h(e._options);n(p)}}else console.error("Unable to load IIIF resource")},e}(); const g=n(2084); var v=function(){function e(e,t){this.authHoldingPage=null,this.clickThroughService=null,this.externalService=null,this.isProbed=!1,this.isResponseHandled=!1,this.kioskService=null,this.loginService=null,this.logoutService=null,this.probeService=null,this.restrictedService=null,this.tokenService=null,e.externalResource=this,this.dataUri=this._getDataUri(e),this.index=e.index,this.authAPIVersion=t.authApiVersion,this._parseAuthServices(e),this._parseCanvasDimensions(e)}return e.prototype._getImageServiceDescriptor=function(e){for(var t=null,n=0;n<e.length;n++){const r=e[n]; let i=r.id;i.endsWith("/")||(i+="/"),r.getProfile()&&s.Utils.isImageProfile(r.getProfile())&&(t=`${i}info.json`)}return t},e.prototype._getDataUri=function(e){const t=e.getContent(); const n=e.getImages(); let r=null;if(t&&t.length){const i=t[0].getBody();return i.length?(o=i[0].getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:i[0].id:null}if(n&&n.length){var o; const a=n[0].getResource();return(o=a.getServices()).length&&(r=this._getImageServiceDescriptor(o))?r:a.id}const s=e.getService(c.vl.IXIF);return s?s.getInfoUri():e.id},e.prototype._parseAuthServices=function(e){if(this.authAPIVersion===.9)this.clickThroughService=s.Utils.getService(e,c.vl.AUTH_0_CLICK_THROUGH),this.loginService=s.Utils.getService(e,c.vl.AUTH_0_LOGIN),this.restrictedService=s.Utils.getService(e,c.vl.AUTH_0_RESTRICTED),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.clickThroughService.getService(c.vl.AUTH_0_TOKEN)):this.loginService?(this.logoutService=this.loginService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.loginService.getService(c.vl.AUTH_0_TOKEN)):this.restrictedService&&(this.logoutService=this.restrictedService.getService(c.vl.AUTH_0_LOGOUT),this.tokenService=this.restrictedService.getService(c.vl.AUTH_0_TOKEN));else{if(void 0!==e.isCanvas&&e.isCanvas()){const t=e.getContent();if(t&&t.length){const n=t[0].getBody();n&&n.length&&(e=n[0])}}this.clickThroughService=s.Utils.getService(e,c.vl.AUTH_1_CLICK_THROUGH),this.loginService=s.Utils.getService(e,c.vl.AUTH_1_LOGIN),this.externalService=s.Utils.getService(e,c.vl.AUTH_1_EXTERNAL),this.kioskService=s.Utils.getService(e,c.vl.AUTH_1_KIOSK),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.clickThroughService.getService(c.vl.AUTH_1_TOKEN),this.probeService=this.clickThroughService.getService(c.vl.AUTH_1_PROBE)):this.loginService?(this.logoutService=this.loginService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.loginService.getService(c.vl.AUTH_1_TOKEN),this.probeService=s.Utils.getService(e,c.vl.AUTH_1_PROBE),this.probeService||(this.probeService=this.loginService.getService(c.vl.AUTH_1_PROBE))):this.externalService?(this.logoutService=this.externalService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.externalService.getService(c.vl.AUTH_1_TOKEN),this.probeService=s.Utils.getService(e,c.vl.AUTH_1_PROBE),this.probeService||(this.probeService=this.externalService.getService(c.vl.AUTH_1_PROBE))):this.kioskService&&(this.logoutService=this.kioskService.getService(c.vl.AUTH_1_LOGOUT),this.tokenService=this.kioskService.getService(c.vl.AUTH_1_TOKEN),this.probeService=s.Utils.getService(e,c.vl.AUTH_1_PROBE),this.probeService||(this.probeService=this.kioskService.getService(c.vl.AUTH_1_PROBE)))}},e.prototype._parseCanvasDimensions=function(e){let t=e.getImages();if(t&&t.length){const n=t[0].getResource();this.width=n.getWidth(),this.height=n.getHeight()}else if((t=e.getContent()).length){const r=t[0].getBody();r.length&&(this.width=r[0].getWidth(),this.height=r[0].getHeight())}},e.prototype._parseDescriptorDimensions=function(e){void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height)},e.prototype.isAccessControlled=function(){return!!(this.clickThroughService||this.loginService||this.externalService||this.kioskService||this.probeService)},e.prototype.hasServiceDescriptor=function(){return!!this.dataUri&&this.dataUri.endsWith("info.json")},e.prototype.getData=function(e){const t=this;return t.data={},new Promise(((n,r) =>{if(t.dataUri)if(t.probeService){t.isProbed=!0;const i=new XMLHttpRequest;i.open("GET",t.probeService.id,!0),i.withCredentials=!0,i.onload=function(){const e=JSON.parse(i.responseText);unescape(e.contentLocation)!==t.dataUri?t.status=g.MOVED_TEMPORARILY:t.status=g.OK,n(t)},i.onerror=function(){t.status=i.status,n(t)},i.send()}else{let o="GET";if(!t.hasServiceDescriptor()){if(!t.isAccessControlled())return t.status=g.OK,void n(t);o="HEAD"}const a=new XMLHttpRequest;a.open(o,t.dataUri,!0),e&&a.setRequestHeader("Authorization",`Bearer ${e.accessToken}`),a.onload=function(){if(a.responseText){const e=JSON.parse(a.responseText); let r=unescape(e["@id"]);t.data=e,t._parseAuthServices(t.data),t._parseDescriptorDimensions(t.data),r.endsWith("/info.json")&&(r=r.substr(0,r.lastIndexOf("/")));let i=t.dataUri;i&&i.endsWith("/info.json")&&(i=i.substr(0,i.lastIndexOf("/"))),r!==i&&t.loginService?t.status=g.MOVED_TEMPORARILY:t.status=g.OK,n(t)}else t.status=g.OK,n(t)},a.onerror=function(){t.status=a.status,a.responseText&&t._parseAuthServices(JSON.parse(a.responseText)),n(t)},a.send()}else r("There is no dataUri to fetch")}))},e}(); var _=function(){function e(e){this.labels=e}return e.prototype.format=function(e){return e.indexOf("<a")!=-1?e:`<a href="${e}">${this.labels[e]?this.labels[e]:e}</a>`},e}(); var y=function(e){return new d(e).bootstrap()}},3911:(e,t)=>{let n; let r; let i; let o; let a; let s; let l; let u; let c;(c=t.rj||(t.rj={})).BOOKMARKING="oa:bookmarking",c.CLASSIFYING="oa:classifying",c.COMMENTING="oa:commenting",c.DESCRIBING="oa:describing",c.EDITING="oa:editing",c.HIGHLIGHTING="oa:highlighting",c.IDENTIFYING="oa:identifying",c.LINKING="oa:linking",c.MODERATING="oa:moderating",c.PAINTING="sc:painting",c.QUESTIONING="oa:questioning",c.REPLYING="oa:replying",c.TAGGING="oa:tagging",c.TRANSCRIBING="oad:transcribing",(u=t.cg||(t.cg={})).AUTO_ADVANCE="auto-advance",u.CONTINUOUS="continuous",u.FACING_PAGES="facing-pages",u.HIDDEN="hidden",u.INDIVIDUALS="individuals",u.MULTI_PART="multi-part",u.NO_NAV="no-nav",u.NON_PAGED="non-paged",u.PAGED="paged",u.REPEAT="repeat",u.SEQUENCE="sequence",u.THUMBNAIL_NAV="thumbnail-nav",u.TOGETHER="together",u.UNORDERED="unordered",(l=t.Hd||(t.Hd={})).CANVAS="canvas",l.CHOICE="choice",l.OA_CHOICE="oa:choice",l.CONTENT_AS_TEXT="contentastext",l.DATASET="dataset",l.DOCUMENT="document",l.IMAGE="image",l.MODEL="model",l.MOVING_IMAGE="movingimage",l.PDF="pdf",l.PHYSICAL_OBJECT="physicalobject",l.SOUND="sound",l.TEXT="text",l.TEXTUALBODY="textualbody",l.VIDEO="video",(s=t.mU||(t.mU={})).ANNOTATION="annotation",s.CANVAS="canvas",s.COLLECTION="collection",s.MANIFEST="manifest",s.RANGE="range",s.SEQUENCE="sequence",(a=t.DD||(t.DD={})).AUDIO_MP4="audio/mp4",a.CORTO="application/corto",a.DICOM="application/dicom",a.DRACO="application/draco",a.EPUB="application/epub+zip",a.GIRDER="image/vnd.kitware.girder",a.GLB="model/gltf-binary",a.GLTF="model/gltf+json",a.IIIF_PRESENTATION_2='application/ld+json;profile="http://iiif.io/api/presentation/2/context.json"',a.IIIF_PRESENTATION_3='application/ld+json;profile="http://iiif.io/api/presentation/3/context.json"',a.JPG="image/jpeg",a.M3U8="application/vnd.apple.mpegurl",a.MP3="audio/mp3",a.MPEG_DASH="application/dash+xml",a.OBJ="text/plain",a.OPF="application/oebps-package+xml",a.PDF="application/pdf",a.PLY="application/ply",a.THREEJS="application/vnd.threejs+json",a.USDZ="model/vnd.usd+zip",a.VIDEO_MP4="video/mp4",a.WAV="audio/wav",a.WEBM="video/webm",(o=t.F4||(t.F4={})).DOC="application/msword",o.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",o.PDF="application/pdf",(i=t.vl||(t.vl={})).IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",i.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",i.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",i.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",i.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",i.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",i.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",i.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",i.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",i.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",i.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",i.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",i.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",i.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",i.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",i.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",i.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",i.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",i.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",i.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",i.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",i.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",i.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",i.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",i.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",i.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",i.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",i.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",i.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",i.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",i.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",i.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",i.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",i.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",i.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",i.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",i.SEARCH_0="http://iiif.io/api/search/0/search",i.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",i.SEARCH_1="http://iiif.io/api/search/1/search",i.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",i.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",i.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",i.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",i.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",i.DOWNLOAD_EXTENSIONS="http://universalviewer.io/download-extensions-profile",i.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",i.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json",(r=t.Pr||(t.Pr={})).BOTTOM_TO_TOP="bottom-to-top",r.LEFT_TO_RIGHT="left-to-right",r.RIGHT_TO_LEFT="right-to-left",r.TOP_TO_BOTTOM="top-to-bottom",(n=t.qQ||(t.qQ={})).CONTINUOUS="continuous",n.INDIVIDUALS="individuals",n.NON_PAGED="non-paged",n.PAGED="paged",n.TOP="top"},3645:e=>{e.exports=function(e){const t=[];return t.toString=function(){return this.map(((t) =>{const n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){typeof e==="string"&&(e=[[null,e,""]]);const i={};if(r)for(let o=0;o<this.length;o++){const a=this[o][0];a!=null&&(i[a]=!0)}for(let s=0;s<e.length;s++){const l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},4015:e=>{function t(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){let n; let r; const i=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){let n=e&&(typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){let r; let i; const o=[]; let a=!0; let s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||n.return==null||n.return()}finally{if(s)throw i}}return o}}(n,r)||function(e,n){if(e){if(typeof e==="string")return t(e,n);let r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()); const o=i[1]; const a=i[3];if(!a)return o;if(typeof btoa==="function"){const s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))); const l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s); const u="/*# ".concat(l," */"); const c=a.sources.map(((e) =>"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")));return[o].concat(c).concat([u]).join("\n")}return[o].join("\n")}},3386:(e,t,n)=>{let r; let i; let o; const a=n(9755);r=function(e,t){const n=!1===t;if(!(t=t||e.jQuery)||!t.fn)throw"JsViews requires jQuery";let r; let i; let o; let a; let s; let l; let u; let c; let p; let f; let h; let d; let g; let v; let _; let y; let m; let E; let I; let T; let A; let b; let O; let C; const N="v0.9.83"; const L=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g; const S=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g; const R=/[ \t]*(\r\n|\n|\r)/g; const w=/\\(['"])/g; const P=/['"\\]/g; const x=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi; const M=/^if\s/; let U=/<(\w+)[>\s]/; const D=/[\x00`><\"'&=]/; const j=/^on[A-Z]|^convert(Back)?$/; const V=/^\#\d+_`[\s\S]*\/\d+_`$/; const k=/[\x00`><"'&=]/g; let G=0; const F={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"}; const H="html"; const B="object"; const q="data-jsv-tmpl"; const Y="jsvTmpl"; const K="For #index in nested block use #getIndex()."; const Q={}; const W=e.jsrender; const X=W&&t&&!t.render; var z={template:{compile:function e(n,r,i,o){function s(r){let a; let s;if(`${r}`===r||r.nodeType>0&&(l=r)){if(!l)if(/^\.\/[^\\:*?"<>]*$/.test(r))(s=f[n=n||r])?r=s:l=document.getElementById(r);else if(t.fn&&!v.rTmpl.test(r))try{l=t(document).find(r)[0]}catch(e){}l&&(o?r=l.innerHTML:((a=l.getAttribute(q))?a!==Y?(r=f[a],delete f[a]):t.fn&&(r=t.data(l).jsvTmpl):(n=n||(t.fn?Y:r),r=e(n,l.innerHTML,i,o)),r.tmplName=n=n||a,n!==Y&&(f[n]=r),l.setAttribute(q,n),t.fn&&t.data(l,Y,r))),l=void 0}else r.fn||(r=void 0);return r}let l; let u; let c=r=r||"";if(o===0&&(o=void 0,c=s(c)),(o=o||(r.markup?r:{})).tmplName=n,i&&(o._parentTmpl=i),!c&&r.markup&&(c=s(r.markup))&&c.fn&&(c=c.markup),void 0!==c)return c.fn||r.fn?c.fn&&(u=c):(r=ce(c,o),me(c.replace(P,"\\$&"),r)),u||(u=re((function(){return u.render.apply(u,arguments)}),r),function(e){let t; let n; let r;for(t in z)e[n=`${t}s`]&&(r=e[n],e[n]={},a[n](r,e))}(u)),n&&!i&&n!==Y&&(Q[n]=u),u}},tag:{compile(e,t,n){let r; let i; let o; let a=new v._tg;function s(){this._={inline:!0,unlinked:!0},this.tagName=e}if(c(t)?t={depends:t.depends,render:t}:`${t}`===t&&(t={template:t}),i=t.baseTag)for(o in t.flow=!!t.flow,t.baseTag=i=`${i}`===i?n&&n.tags[i]||g[i]:i,a=re(a,i),t)a[o]=J(i[o],t[o]);else a=re(a,t);return void 0!==(r=a.template)&&(a.template=`${r}`===r?f[r]||f(r):r),!1!==a.init&&((s.prototype=a).constructor=a._ctr=s),n&&(a._parentTmpl=n),a}},viewModel:{compile(e,n){let r; let i; const o=this; const a=n.getters; const s=n.extend; const l=n.id; const c=t.extend({_is:e||"unnamed",unmap:I,merge:E},s); let f=""; let h=""; const d=a?a.length:0; const g=t.observable; const v={};function _(e){i.apply(this,e)}function y(){return new _(arguments)}function m(e,t){let n; let r; let i; let s; let l; const u=a.length;for(n=0;n<u;n++)r=void 0,`${s=a[n]}`!==s&&(s=(r=s).getter),void 0===(l=e[s])&&r&&void 0!==(i=r.defaultVal)&&(l=le(i,e)),t(l,r&&o[r.type],s)}function E(e){e=`${e}`===e?JSON.parse(e):e;let t; let n; let r; let i; let o; let a; let s; let c; let f; let h; const d=this;if(p(d)){for(c={},h=[],r=e.length,i=d.length,t=0;t<r;t++){for(f=e[t],s=!1,n=0;n<i&&!s;n++)c[n]||(a=d[n],l&&(c[n]=s=`${l}`===l?f[l]&&(v[l]?a[l]():a[l])===f[l]:l(a,f)));s?(a.merge(f),h.push(a)):h.push(y.map(f))}g?g(d).refresh(h,!0):d.splice.apply(d,[0,d.length].concat(h))}else for(o in m(e,((e,t,n) =>{t?d[n]().merge(e):d[n](e)})),e)o===u||v[o]||(d[o]=e[o])}function I(){let e; let n; let r; let i; let s; let l; const c=this;if(p(c))return ue(c);for(e={},i=a.length,r=0;r<i;r++)s=void 0,`${n=a[r]}`!==n&&(n=(s=n).getter),l=c[n](),e[n]=s&&l&&o[s.type]?p(l)?ue(l):l.unmap():l;for(n in c)n==="_is"||v[n]||n===u||n.charAt(0)==="_"&&v[n.slice(1)]||t.isFunction(c[n])||(e[n]=c[n]);return e}for(_.prototype=c,r=0;r<d;r++)!function(e){e=e.getter||e,v[e]=r+1;const t=`_${e}`;f+=(f?",":"")+e,h+=`this.${t} = ${e};\n`,c[e]=c[e]||function(n){if(!arguments.length)return this[t];g?g(this).setProperty(e,n):this[t]=n},g&&(c[e].set=c[e].set||function(e){this[t]=e})}(a[r]);return(i=new Function(f,h.slice(0,-1))).prototype=c,c.constructor=i,y.map=function(t){let n; let r; let i; let o=t=`${t}`===t?JSON.parse(t):t; const a=[];if(p(t)){for(r=(t=t||[]).length,n=0;n<r;n++)a.push(this.map(t[n]));return a._is=e,a.unmap=I,a.merge=E,a}if(t)for(i in m(t,((e,t) =>{t&&(e=t.map(e)),a.push(e)})),o=this.apply(this,a),t)i===u||v[i]||(o[i]=t[i]);return o},y.getters=a,y.extend=s,y.id=l,y}},helper:{},converter:{}};function $(e,t){return function(){let n; const r=this; const i=r.base;return r.base=e,n=t.apply(r,arguments),r.base=i,n}}function J(e,t){return c(t)&&((t=$(e?e._d?e:$(te,e):te,t))._d=1),t}function Z(e,t){for(const n in t.props)j.test(n)&&(e[n]=J(e[n],t.props[n]))}function ee(e){return e}function te(){return""}function ne(e){this.name=`${t.link?"JsViews":"JsRender"} Error`,this.message=e||this.name}function re(e,t){for(const n in t)e[n]=t[n];return e}function ie(e,t,n){return e?p(e)?ie.apply(a,e):(_.delimiters=[e,t,b=n?n.charAt(0):b],E=e.charAt(0),I=e.charAt(1),T=t.charAt(0),A=t.charAt(1),e=`\\${E}(\\${b})?\\${I}`,t=`\\${T}\\${A}`,i=`(?:(\\w+(?=[\\/\\s\\${T}]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\${T}]|\\${T}(?!\\${A}))*?)`,v.rTag=`(?:${i})`,i=new RegExp(`(?:${e}${i}(\\/)?|\\${E}(\\${b})?\\${I}(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))${t}`,"g"),v.rTmpl=new RegExp(`<.*>|([^\\\\]|^)[{}]|${e}.*${t}`),m):_.delimiters}function oe(){const e=this.get("item");return e?e.index:void 0}function ae(){return this.index}function se(e,t,n,r,i,o,a,s){let l; let u; let c; const p=this; const f=t==="array";p.content=s,p.views=f?[]:{},p.parent=n,p.type=t||"top",p.data=r,p.tmpl=i,c=p._={key:0,useKey:f?0:1,id:`${G++}`,onRender:a,bnds:{}},p.linked=!!a,n?(l=n.views,(u=n._).useKey?(l[c.key=`_${u.useKey++}`]=p,p.index=K,p.getIndex=oe):l.length===(c.key=p.index=o)?l.push(p):l.splice(o,0,p),p.ctx=e||n.ctx):p.ctx=e}function le(e,n){return t.isFunction(e)?e.call(n):e}function ue(e){let t; const n=[]; const r=e.length;for(t=0;t<r;t++)n.push(e[t].unmap());return n}function ce(e,n){let r; const i=y._wm||{}; const o=re({tmpls:[],links:{},bnds:[],_is:"template",render:de},n);return o.markup=e,n.htmlTag||(r=U.exec(e),o.htmlTag=r?r[1].toLowerCase():""),(r=i[o.htmlTag])&&r!==i.div&&(o.markup=t.trim(o.markup)),o}function pe(e,t){const n=`${e}s`;a[n]=function r(i,o,s){let l; let u; let c; let p;if(i&&typeof i===B&&!i.nodeType&&!i.markup&&!i.getTgt&&!(e==="viewModel"&&i.getters||i.extend)){for(c in i)r(c,i[c],o);return o||a}return void 0===o&&(o=i,i=void 0),i&&`${i}`!==i&&(s=o,o=i,i=void 0),p=s?e==="viewModel"?s:s[n]=s[n]||{}:r,u=t.compile,o===null?i&&delete p[i]:(o=u?u.call(p,i,o,s,0):o,i&&(p[i]=o)),u&&o&&(o._is=e),o&&(l=v.onStore[e])&&l(i,o,u),o}}function fe(e){m[e]=function(t){return arguments.length?(_[e]=t,m):_[e]}}function he(e){function t(t,n){this.tgt=e.getTgt(t,n)}return c(e)&&(e={getTgt:e}),e.baseMap&&(e=re(re({},e.baseMap),e)),e.map=function(e,n){return new t(e,n)},e}function de(e,t,n,r,i,a){let s; let l; let u; let c; let f; let h; let d; let g; let _=r; let m="";if(!0===t?(n=t,t=void 0):typeof t!==B&&(t=void 0),(u=this.tag)?(f=this,c=(_=_||f.view).getTmpl(u.template||f.tmpl),arguments.length||(e=_)):c=this,c){if(!r&&e&&e._is==="view"&&(_=e),_&&e===_&&(e=_.data),h=!_,C=C||h,_||((t=t||{}).root=e),!C||y.useViews||c.useViews||_&&_!==o)m=ge(c,e,t,n,_,i,a,u);else{if(_?(d=_.data,g=_.index,_.index=K):((_=o).data=e,_.ctx=t),p(e)&&!n)for(s=0,l=e.length;s<l;s++)_.index=s,_.data=e[s],m+=c.fn(e[s],_,v);else _.data=e,m+=c.fn(e,_,v);_.data=d,_.index=g}h&&(C=void 0)}return m}function ge(e,t,n,r,i,o,a,s){function l(e){(I=re({},n))[E]=e}let u; let c; let f; let h; let d; let g; let _; let y; let m; let E; let I; let T; let A="";if(s&&(m=s.tagName,T=s.tagCtx,n=n?Oe(n,s.ctx):s.ctx,e===i.content?_=e!==i.ctx._wrp?i.ctx._wrp:void 0:e!==T.content?e===s.template?(_=T.tmpl,n._wrp=T.content):_=T.content||i.content:_=i.content,!1===T.props.link&&((n=n||{}).link=!1),(E=T.props.itemVar)&&(E.charAt(0)!=="~"&&ye("Use itemVar='~myItem'"),E=E.slice(1))),i&&(a=a||i._.onRender,n=Oe(n,i.ctx)),!0===o&&(g=!0,o=0),a&&(n&&!1===n.link||s&&s._.noVws)&&(a=void 0),y=a,!0===a&&(y=void 0,a=i._.onRender),n=e.helpers?Oe(e.helpers,n):n,I=n,p(t)&&!r)for(f=g?i:void 0!==o&&i||new se(n,"array",i,t,e,o,a,_),i&&i._.useKey&&(f._.bnd=!s||s._.bnd&&s),E&&(f.it=E),E=f.it,u=0,c=t.length;u<c;u++)E&&l(t[u]),h=new se(I,"item",f,t[u],e,(o||0)+u,a,f.content),d=e.fn(t[u],h,v),A+=f._.onRender?f._.onRender(d,h):d;else E&&l(t),f=g?i:new se(I,m||"data",i,t,e,o,a,_),s&&!s.flow&&(f.tag=s,s.view=f),A+=e.fn(t,f,v);return y?y(A,f):A}function ve(e,t,n){let r=void 0!==n?c(n)?n.call(t.data,e,t):n||"":`{Error: ${e.message}}`;return _.onError&&void 0!==(n=_.onError.call(t.data,e,n&&r,t))&&(r=n),t&&!t.linkCtx?h.html(r):r}function _e(e){throw new v.Err(e)}function ye(e){_e(`Syntax error\n${e}`)}function me(e,t,n,r,o){function a(t){(t-=g)&&y.push(e.substr(g,t).replace(R,"\\n"))}function s(t,n){t&&(t+="}}",ye(`${n?`{{${n}}} block has {{/${t} without {{${t}`:`Unmatched or missing {{/${t}`}, in template:\n${e}`))}let l; let u; let c; let p; let f; const h=_.allowCode||t&&t.allowCode||!0===m.allowCode; const d=[]; var g=0; const v=[]; var y=d; let I=[,,d];if(h&&t._is&&(t.allowCode=h),n&&(void 0!==r&&(e=e.slice(0,-r.length-2)+T),e=E+e+A),s(v[0]&&v[0][2].pop()[0]),e.replace(i,((i,l,u,f,d,_,m,E,T,A,b,O) =>{(m&&l||T&&!u||E&&E.slice(-1)===":"||A)&&ye(i),_&&(d=":",f=H);let C=(l||n)&&[[]]; let N=""; let L=""; let S=""; let P=""; let U=""; let D=""; let V=""; let k=""; let G=!(T=T||n&&!o)&&!d;u=u||(E=E||"#data",d),a(O),g=O+i.length,m?h&&y.push(["*",`\n${E.replace(/^:/,"ret+= ").replace(w,"$1")};\n`]):u?(u==="else"&&(M.test(E)&&ye('for "{{else if expr}}" use "{{else expr}}"'),C=I[7]&&[[]],I[8]=e.substring(I[8],O),I=v.pop(),y=I[2],G=!0),E&&Ae(E.replace(R," "),C,t).replace(x,((e,t,n,r,i,o,a,s) =>(r=`'${i}':`,a?(L+=`${o},`,P+=`'${s}',`):n?(S+=`${r}j._cp(${o},"${s}",view),`,D+=`${r}'${s}',`):t?V+=o:(i==="trigger"&&(k+=o),N+=`${r+o},`,U+=`${r}'${s}',`,p=p||j.test(i)),""))).slice(0,-1),C&&C[0]&&C.pop(),c=[u,f||!!r||p||"",G&&[],Ie(P||(u===":"?"'#data',":""),U,D),Ie(L||(u===":"?"data,":""),N,S),V,k,C||0],y.push(c),G&&(v.push(I),(I=c)[8]=g)):b&&(s(b!==I[0]&&I[0]!=="else"&&b,I[0]),I[8]=e.substring(I[8],O),I=v.pop()),s(!I&&b),y=I[2]})),a(e.length),(g=d[d.length-1])&&s(`${g}`!==g&&+g[8]===g[8]&&g[0]),n){for(u=be(d,e,n),f=[],l=d.length;l--;)f.unshift(d[l][7]);Ee(u,f)}else u=be(d,t);return u}function Ee(e,t){let n; let r; let i=0; const o=t.length;for(e.deps=[],e.paths=[];i<o;i++)for(n in e.paths.push(r=t[i]),r)n!=="_jsvto"&&r.hasOwnProperty(n)&&r[n].length&&!r[n].skp&&(e.deps=e.deps.concat(r[n]))}function Ie(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function Te(e,t){return`\n\t${t?`${t}:{`:""}args:[${e[0]}]${e[1]||!t?`,\n\tprops:{${e[1]}}`:""}${e[2]?`,\n\tctx:{${e[2]}}`:""}`}function Ae(e,t,n){let r; let i; let a; let s; let l; let u=t&&t[0]; let c={bd:u}; const p={0:c}; let f=0; const h=(n?n.links:u&&(u.links=u.links||{}))||o.tmpl.links; let d=0; const g={}; const v={}; const _=(e+(n?" ":"")).replace(S,((o,_,y,m,E,A,b,O,C,N,S,R,w,P,x,M,U,D,j,V) =>{m&&!O&&(E=m+E),A=A||"",y=y||_||R,E=E||C;let k; let G; let F; let H; let B; let q=")";if((N=N||U||"")==="["&&(N="[j._sq(",q=")]"),!b||l||s){if(u&&M&&!l&&!s&&(!r||a||i)&&(k=v[d-1],V.length-1>j-(k||0))){if(k=V.slice(k,j+o.length),!0!==G)if(F=i||p[d-1].bd,(H=F[F.length-1])&&H.prm){for(;H.sb&&H.sb.prm;)H=H.sb;B=H.sb={path:H.sb,bnd:H.bnd}}else F.push(B={path:F.pop()});(G=h[M=`${I}:${k} onerror=''${T}`])||(h[M]=!0,h[M]=G=me(M,n,!0)),!0!==G&&B&&(B._jsv=G,B.prm=c.bd,B.bnd=B.bnd||B.path&&B.path.indexOf("^")>=0)}return l?(l=!w)?o:`${R}"`:s?(s=!P)?o:`${R}"`:(y?(v[d]=j++,c=p[++d]={bd:[]},y):"")+(D?d?"":(f=V.slice(f,j),(r?(r=a=i=!1,"\b"):"\b,")+f+(f=j+o.length,u&&t.push(c.bd=[]),"\b")):O?(d&&ye(e),u&&t.pop(),r=E,a=m,f=j+o.length,u&&((u=c.bd=t[r]=[]).skp=!m),`${E}:`):E?E.split("^").join(".").replace(L,((e,n,o,a,s,l,p,f) =>{const h=o===".";if(o&&(E=E.slice(n.length),/^\.?constructor$/.test(f||E)&&ye(e),h||(e=(a?`view.hlp("${a}")`:s?"view":"data")+(f?(l?`.${l}`:a||s?"":`.${o}`)+(p||""):(f=a?"":s?l||"":o,"")),e=n+((e+=f?`.${f}`:"").slice(0,9)==="view.data"?e.slice(5):e)),u)){if(F=r==="linkTo"?i=t._jsvto=t._jsvto||[]:c.bd,H=h&&F[F.length-1]){if(H._jsv){for(;H.sb;)H=H.sb;H.bnd&&(E=`^${E.slice(1)}`),H.sb=E,H.bnd=H.bnd||E.charAt(0)==="^"}}else F.push(E);v[d]=j+(h?1:0)}return e}))+(N?(c=p[++d]={bd:[]},g[d]=q,N):A):A||(x?(x=g[d]||x,g[d]=!1,c=p[--d],x+(N?(c=p[++d],g[d]=q,N):"")):S?(g[d]||ye(e),","):_?"":(l=w,s=P,'"')))}ye(e)}));return!d&&_||ye(e)}function be(e,t,n){let r; let i; let o; let a; let s; let l; let u; let c; let p; let f; let h; let d; let v; let m; let E; let I; let T; let A; let b; let O; let C; let N; let L; let S; let P; let x; let M; let U; let D; let j=0; let V=y.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters; let k=""; const G={}; const F=e.length;for(`${t}`===t?(T=n?`data-link="${t.replace(R," ").slice(1,-1)}"`:t,t=0):(T=t.tmplName||"unnamed",t.allowCode&&(G.allowCode=!0),t.debug&&(G.debug=!0),f=t.bnds,I=t.tmpls),r=0;r<F;r++)if(`${i=e[r]}`===i)k+=`\n+"${i}"`;else if((o=i[0])==="*")k+=`;\n${i[1]}\nret=ret`;else{if(a=i[1],O=!n&&i[2],s=`${Te(i[3],"params")}},${Te(d=i[4])}`,M=i[5],D=i[6],C=i[8]&&i[8].replace(w,"$1"),(S=o==="else")?h&&h.push(i[7]):(j=0,f&&(h=i[7])&&(h=[h],j=f.push(1))),V=V||d[1]||d[2]||h||/view.(?!index)/.test(d[0]),(P=o===":")?a&&(o=a===H?">":a+o):(O&&((A=ce(C,G)).tmplName=`${T}/${o}`,A.useViews=A.useViews||V,be(O,A),V=A.useViews,I.push(A)),S||(b=o,V=V||o&&(!g[o]||!g[o].flow),L=k,k=""),N=(N=e[r+1])&&N[0]==="else"),U=M?";\ntry{\nret+=":"\n+",v="",m="",P&&(h||D||a&&a!==H)){if((x=new Function("data,view,j,u",` // ${T} ${j} ${o}\nreturn {${s}};`))._er=M,x._tag=o,n)return x;Ee(x,h),p=!0,v=`${(E=`c("${a}",view,`)+j},`,m=")"}if(k+=P?(n?`${M?"try{\n":""}return `:U)+(p?(p=void 0,V=c=!0,`${E+(h?(f[j-1]=x,j):`{${s}}`)})`):o===">"?(u=!0,`h(${d[0]})`):`((v=${d[0]})!=null?v:${n?"null)":'"")'}`):(l=!0,`\n{view:view,tmpl:${O?I.length:"0"},${s}},`),b&&!N){if(k=`[${k.slice(0,-1)}]`,E=`t("${b}",view,this,`,n||h){if((k=new Function("data,view,j,u",` // ${T} ${j} ${b}\nreturn ${k};`))._er=M,k._tag=b,h&&Ee(f[j-1]=k,h),n)return k;v=`${E+j},undefined,`,m=")"}k=`${L+U+E+(j||k)})`,h=0,b=0}M&&(V=!0,k+=`;\n}catch(e){ret${n?"urn ":"+="}${v}j._err(e,view,${M})${m};}${n?"":"ret=ret"}`)}k=`// ${T}\nvar v${l?",t=j._tag":""}${c?",c=j._cnvt":""}${u?",h=j._html":""}${n?";\n":',ret=""\n'}${G.debug?"debugger;":""}${k}${n?"\n":";\nreturn ret;"}`,!1!==_.debugMode&&(k=`try {\n${k}\n}catch(e){\nreturn j._err(e, view);\n}`);try{k=new Function("data,view,j,u",k)}catch(e){ye(`Compiled template code:\n\n${k}\n: "${e.message}"`)}return t&&(t.fn=k,t.useViews=!!V),k}function Oe(e,t){return e&&e!==t?t?re(re({},t),e):e:t&&re({},t)}function Ce(e){return F[e]||(F[e]=`&#${e.charCodeAt(0)};`)}function Ne(e,n,r){const i=this.jquery&&(this[0]||_e("Unknown template")); const o=i.getAttribute(q);return de.call(o?t.data(i).jsvTmpl:f(i),e,n,r)}function Le(e){return e!=null?D.test(e)&&(`${e}`).replace(k,Ce)||e:""}if(a={jsviews:N,sub:{View:se,Err:ne,tmplFn:me,parse:Ae,extend:re,extendCtx:Oe,syntaxErr:ye,onStore:{},addSetting:fe,settings:{allowCode:!1},advSet:te,_ths:Z,_tg(){},_cnvt(e,t,n,r){let i; let o; const a=typeof n==="number"&&t.tmpl.bnds[n-1]; const s=t.linkCtx;return void 0!==r?n=r={props:{},args:[r]}:a&&(n=a(t.data,t,v)),o=n.args[0],(e||a)&&((i=s&&s.tag)||(i=re(new v._tg,{_:{inline:!s,bnd:a,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:n}),s&&(s.tag=i,i.linkCtx=s),n.ctx=Oe(n.ctx,(s?s.view:t).ctx)),i._er=r&&o,Z(i,n),n.view=t,i.ctx=n.ctx||i.ctx||{},n.ctx=void 0,o=i.cvtArgs(e!=="true"&&e)[0],o=a&&t._.onRender?t._.onRender(o,t,i):o),o!=null?o:""},_tag(e,n,r,i,a,s){let l; let u; let c; let p; let f; let d; let g; let _; let y; let m; let E; let I; let T; let A; let b; let O; let C; let N; let L=""; const S=(n=n||o).linkCtx||0; const R=n.ctx; const w=r||n.tmpl; const P=typeof i==="number"&&n.tmpl.bnds[i-1];for(e._is==="tag"?(e=(l=e).tagName,i=l.tagCtxs,l.template):(u=n.getRsc("tags",e)||_e(`Unknown tag: {{${e}}} `)).template,void 0!==s?(L+=s,i=s=[{props:{},args:[]}]):P&&(i=P(n.data,n,v)),g=i.length,d=0;d<g;d++)y=i[d],(!S||!S.tag||d&&!S.tag._.inline||l._er)&&((E=w.tmpls&&y.tmpl)&&(E=y.content=w.tmpls[E-1]),y.index=d,y.tmpl=E,y.render=de,y.view=n,y.ctx=Oe(y.ctx,R)),(r=y.props.tmpl)&&(y.tmpl=n.getTmpl(r)),l||(I=!!(l=new u._ctr).init,l.parent=f=R&&R.tag,l.tagCtxs=i,C=l.dataMap,S&&(l._.inline=!1,S.tag=l,l.linkCtx=S),(l._.bnd=P||S.fn)?l._.arrVws={}:l.dataBoundOnly&&_e(`{^{${e}}} tag must be data-bound`)),i=l.tagCtxs,C=l.dataMap,y.tag=l,C&&i&&(y.map=i[d].map),l.flow||(m=y.ctx=y.ctx||{},c=l.parents=m.parentTags=R&&Oe(m.parentTags,R.parentTags)||{},f&&(c[f.tagName]=f),c[l.tagName]=m.tag=l);if(!(l._er=s)){for(Z(l,i[0]),l.rendering={},d=0;d<g;d++)O=(y=l.tagCtx=i[d]).props,b=l.cvtArgs(),(T=O.dataMap||C)&&(b.length||O.dataMap)&&((A=y.map)&&A.src===b[0]&&!a||(A&&A.src&&A.unmap(),A=y.map=T.map(b[0],O,void 0,!l._.bnd)),b=[A.tgt]),l.ctx=y.ctx,d||(I&&(l.template,l.init(y,S,l.ctx),I=void 0),S&&(S.attr=l.attr=S.attr||l.attr),p=l.attr,l._.noVws=p&&p!==H),_=void 0,l.render&&(_=l.render.apply(l,b),n.linked&&_&&l.linkedElem&&!V.test(_)&&(_=ge(t.templates(_),b[0],void 0,void 0,n,void 0,void 0,l))),b.length||(b=[n]),void 0===_&&(N=b[0],l.contentCtx&&(N=l.contentCtx(N)),_=y.render(N,!0)||(a?void 0:"")),L=L?L+(_||""):_;l.rendering=void 0}return l.tagCtx=i[0],l.ctx=l.tagCtx.ctx,l._.noVws&&l._.inline&&(L=p==="text"?h.html(L):""),P&&n._.onRender?n._.onRender(L,n,l):L},_er:_e,_err:ve,_html:Le,_cp:ee,_sq(e){return e==="constructor"&&ye(""),e}},settings:{delimiters:ie,advanced(e){return e?(re(y,e),v.advSet(),m):y}},getCtx:ee,map:he},(ne.prototype=new Error).constructor=ne,oe.depends=function(){return[this.get("item"),"index"]},ae.depends="index",se.prototype={get(e,t){t||!0===e||(t=e,e=void 0);let n; let r; let i; let o; let a=this; const s=!t||t==="root";if(e){if(!(o=t&&a.type===t&&a))if(n=a.views,a._.useKey){for(r in n)if(o=t?n[r].get(e,t):n[r])break}else for(r=0,i=n.length;!o&&r<i;r++)o=t?n[r].get(e,t):n[r]}else if(s)for(;a.parent;)o=a,a=a.parent;else for(;a&&!o;)o=a.type===t?a:void 0,a=a.parent;return o},getIndex:ae,getRsc(e,t){for(var n,r,i=this;void 0===n&&i;)n=(r=i.tmpl&&i.tmpl[e])&&r[t],i=i.parent;return n||a[e][t]},getTmpl(e){return e&&(e.fn?e:this.getRsc("templates",e)||f(e))},hlp(t,n){let r; let i; const o=this; let s=o.ctx;if(s&&(s=s[t]),void 0===s&&(s=d[t]),s&&s._cp){if(n)return(i=v._ceo(s[1].deps)).unshift(s[0]),i._cp=!0,i;s=a.getCtx(s)}return s&&c(s)&&!s._wrp&&(r=function(){return s.apply(this&&this!==e?this:o,arguments)},r._wrp=o,re(r,s)),r||s},_is:"view"},v=a.sub,m=a.settings,!(W||t&&t.render)){for(r in z)pe(r,z[r]);for(O in h=a.converters,d=a.helpers,g=a.tags,v._tg.prototype={baseApply(e){return this.base.apply(this,e)},cvtArgs(e){const t=this; const n=t.tagCtx; const r=n.view; let i=n.args;return e=(e=e||t.convert)&&(`${e}`===e?r.getRsc("converters",e)||_e(`Unknown converter: '${e}'`):e),i=i.length||n.index?e?i.slice():i:[r.data],e&&(e.depends&&(t.depends=v.getDeps(t.depends,t,e.depends,e)),i[0]=e.apply(t,i)),i}},o=v.topView=new se,t?(t.fn.render=Ne,u=t.expando,t.observable&&(re(v,t.views.sub),a.map=t.views.map)):(t={},n&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return typeof e==="function"},t.isArray=Array.isArray||function(e){return{}.toString.call(e)==="[object Array]"},v._jq=function(e){e!==t&&(re(e,t),(t=e).fn.render=Ne,delete t.jsrender,u=t.expando)},t.jsrender=N),(_=v.settings).allowCode=!1,c=t.isFunction,t.render=Q,t.views=a,t.templates=f=a.templates,_)fe(O);(m.debugMode=function(e){return void 0===e?_.debugMode:(_.debugMode=e,_.onError=`${e}`===e?new Function("",`return '${e}';`):c(e)?e:void 0,m)})(!1),y=_.advanced={useViews:!1,_jsv:!1},g({if:{render(e){const t=this; const n=t.tagCtx; const r=t.rendering.done||!e&&(arguments.length||!n.index)?"":(t.rendering.done=!0,t.selected=n.index,n.render(n.view,!0));return r},flow:!0},for:{render(e){let t; const n=!arguments.length; const r=this; const i=r.tagCtx; let o=""; let a=0;return r.rendering.done||(void 0!==(t=n?i.view.data:e)&&(o+=i.render(t,n),a+=p(t)?t.length:1),(r.rendering.done=a)&&(r.selected=i.index)),o},flow:!0},props:{baseTag:"for",dataMap:he(((e) =>{let t; let n; const r=[];if(typeof e===B)for(t in e)n=e[t],t!==u&&e.hasOwnProperty(t)&&!c(n)&&r.push({key:t,prop:n});return r})),flow:!0},include:{flow:!0},"*":{render:ee,flow:!0},":*":{render:ee,flow:!0},dbg:d.dbg=h.dbg=function(e){try{throw console.log(`JsRender dbg breakpoint: ${e}`),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),h({html:Le,attr:Le,url(e){return e!=null?encodeURI(`${e}`):e===null?e:""}})}if(_=v.settings,p=(t||W).isArray,m.delimiters("{{","}}","^"),X&&W.views.sub._jq(t),a=t.views,v=a.sub,c=t.isFunction,p=t.isArray,u=t.expando,!t.observe){const Se=t.event.special; const Re=[].slice; const we=[].splice; const Pe=[].concat; const xe=parseInt; const Me=/\S+/g; var Ue=v.propChng=v.propChng||"propertyChange"; var De=v.arrChng=v.arrChng||"arrayChange"; var je={}; const Ve=`${Ue}.observe`; let ke=1; let Ge=1; let Fe=1; const He=t.hasData; const Be=t.data; const qe={}; const Ye=function(e){return e._cId=e._cId||`.obs${Ge++}`}; const Ke=function(e,t){return this._data=t,this._ns=e,this}; const Qe=function(e,t){return this._data=t,this._ns=e,this}; const We=function(e){return p(e)?[e]:e}; const Xe=function(e,t,n){let r; let i; let o=t; let a=o; const s=(e=e?p(e)?e:[e]:[])&&e.length; let l=[];for(r=0;r<s;r++)i=e[r],c(i)?l=l.concat(Xe(i.call(t,t,n),t)):`${i}`===i?(a!==o&&l.push(o=a),l.push(i)):(t=a=i,a!==o&&l.push(o=a));return l}; const ze=function(e,t){for(const n in e)return;delete je[t]}; const $e=function(e,t){function n(e){return typeof e===B&&(h[0]||f&&p(e))}if(!e.data||!e.data.off){let r; let i; let o; const a=t.oldValue; const s=t.value; const l=e.data; const u=l.observeAll; const c=l.cb; var f=!c.noArray; var h=l.paths; const d=l.ns;e.type===De?(c.array||c).call(l,e,t):l.prop!==t.path&&l.prop!=="*"||(u?(r=`${u._path}.${t.path}`,i=u.filter,o=[e.target].concat(u.parents()),n(a)&&Je(f,d,[a],h,c,!0,i,[o],r),n(s)&&Je(f,d,[s],h,c,void 0,i,[o],r)):(n(a)&&Je(f,d,[a],h,c,!0),n(s)&&Je(f,d,[s],h,c)),l.cb(e,t))}}; var Je=function(){const e=Pe.apply([],arguments);return s.apply(e.shift(),e)}; const Ze=function(e,t,n){tt(this._ns,this._data,e,t,[],"root",n)}; const et=function(e,t){Ze.call(this,e,t,!0)}; var tt=function(e,t,n,r,i,o,a,c){function f(e,t){for(g=e.length,_=`${o}[]`;g--;)h(e,g,t,1)}function h(t,i,o,a){let s; let p;i!==u&&(s=l._fltr(_,t[i],y,r))&&(p=y.slice(),a&&m&&p[0]!==m&&p.unshift(m),tt(e,s,n,r||(a?void 0:0),p,_,o,c))}function d(e,t){switch(o=e.data.observeAll._path,m=e.target,t.change){case"insert":f(t.items);break;case"remove":f(t.items,!0);break;case"set":_=`${o}.${t.path}`,h(t,"oldValue",!0),h(t,"value")}m=void 0,n.apply(this,arguments)}let g; let v; let _; let y; let m; let E; const I=!c||c.un||!a;if(t&&typeof t===B){if(y=[t].concat(i),v=p(t)?"":"*",c&&I&&He(t)&&c[E=Be(t).obId])return void c[E]++;if(c||(c={un:a}),n){if(v||r!==0)if(d._cId=Ye(n),I)s(e,t,v,d,a,r,y,o),E=Be(t).obId,c[E]=(c[E]||0)+1;else{if(--c[Be(t).obId])return;s(e,t,v,d,a,r,y,o)}}else c&&(c[Be(t).obId]=1),s(e,t,v,void 0,a,r,y,o);if(v)for(g in t)_=`${o}.${g}`,h(t,g,a);else f(t,a)}}; const nt=function(e){return e.indexOf(".")<0&&e.indexOf("[")<0};s=function(){function e(){function i(e,r,i,o){let a; let s; const l=He(H); const u=We(H); const c=x; const p=M;if(e=n?`${e}.${n}`:e,!E&&(o||i))for(C=(C=(C=l&&t._data(H))&&C.events)&&C[i?De:Ue],b=C&&C.length;b--;)if((O=C[b]&&C[b].data)&&(o&&O.ns!==n||!o&&O.ns===n&&O.cb&&O.cb._cId===I._cId))return;E||o?t(u).off(e,$e):((s=i?{}:{fullPath:y,paths:r?[r]:[],prop:_}).ns=n,s.cb=I,M&&(s.observeAll={_path:p,path(){return a=c.length,p.replace(/[[.]/g,((e) =>(a--,e==="["?`[${t.inArray(c[a-1],c[a])}`:".")))},parents(){return c},filter:U}),t(u).on(e,null,s,$e),R&&(R[Be(H).obId||Be(H,"obId",ke++)]=H))}function a(t){const n=F;return t.ob=N(t,n),t.cb=function(i,o){const a=t.ob; const l=t.sb; const u=N(t,n);u!==a&&(typeof a===B&&(s(a,!0),(l||r&&p(a))&&e([a],l,I,N,!0)),t.ob=u,typeof u===B&&(s(u),(l||r&&p(u))&&e([u],l,I,N))),I(i,o)}}function s(e,t,n,o){if(r){const a=H; const s=M;H=e,o&&(H=e[o],M+=`.${o}`),U&&H&&(H=l._fltr(M,H,o?[e].concat(x):x,U)),H&&(n||p(H))&&i(`${De}.observe${I?Ye(I):""}`,void 0,!0,t),H=a,M=s}}let f; let h; let d; let g; let _; let y; let m; let E; let I; let T; let A; let b; let O; let C; let N; let L; let S; let R; let w; let P; let x; let M; let U; let D; let j; let V=Ve; const k=this!=1?Pe.apply([],arguments):Re.call(arguments); let G=k.pop()||!1; var F=k.shift(); var H=F; let q=k.length;if(`${G}`===G&&(M=G,x=k.pop(),U=k.pop(),G=!!k.pop(),q-=3),G===!!G&&(E=G,G=k[q-1],G=!q||`${G}`===G||G&&!c(G)?void 0:(q--,k.pop()),E&&!q&&c(F)&&(G=F,F=void 0)),I=G,q&&c(k[q-1])&&(L=N=I,I=k.pop(),q--),!E||!I||I._cId){for(V+=I?(A=I._inId||"",E?I._cId+A:(T=Ye(I))+A):"",T&&!E&&(R=je[T]=je[T]||{}),j=(D=n&&n.match(Me)||[""]).length;j--;){if(n=D[j],F&&(!(y=k[0])||`${y}`!==y)&&(p(F)?s(F,E,!0):E&&i(V,"")),E&&!q&&!F)for(h in je)for(O in h=je[h])H=h[O],p(H)?s(H,E,E):i(V,"");for(w=0,f=0;f<q;f++)if((y=k[f])!==""){if(y&&y._cp&&(N=v._gccb(y[0]),o=F=y[0].data,y=y[1]),H=F,`${y}`===y){if((g=y.split("^"))[1]&&(w=g[0].split(".").length,w=(y=g.join(".")).split(".").length-w),N&&(S=N(y,F,w),N=L),S){q+=S.length-1,we.apply(k,[f--,1].concat(S));continue}g=y.split(".")}else c(y)||(y&&y._jsv?((P=E?y.cb:a(y)).noArray=!r,P._cId=I._cId,P._inId=P._inId||`.obIn${Fe++}`,(y.bnd||y.prm&&y.prm.length||!y.sb)&&e([H],y.path,[o],y.prm,P,N,E),y.sb&&e([y.ob],y.sb,I,N,E),y=o,H=void 0):H=y),g=[F=y];for(;H&&void 0!==(_=g.shift());)if(typeof H===B){if(`${_}`===_){if(_==="")continue;if(g.length<w+1&&!H.nodeType){if(!E&&(C=He(H)&&t._data(H))){for(C=(C=C.events)&&C[Ue],b=C&&C.length,d=0;b--;)!(O=C[b].data)||O.ns!==n||O.cb._cId!==I._cId||O.cb._inId!==I._inId||O.prop!==_&&O.prop!=="*"&&O.prop!=="**"||((h=g.join("."))&&O.paths.push(h),d++);if(d){H=H[_];continue}}if(_==="*"||_==="**"){if(!E&&C&&C.length&&i(V,"",!1,!0),_==="*")for(h in i(V,""),H)h!==u&&s(H,E,void 0,h);else t.observable(n,H)[`${E?"un":""}observeAll`](I);break}_&&i(`${V}.p_${_}`,g.join("^"))}M&&(M+=`.${_}`),_=H[_]}if(c(_)){(m=_.depends)&&e([H],Xe(m,H,I),I,N,E);break}H=_,E&&H===F&&(f>q-2||`${k[f+1]}`!==k[f+1])&&i(V,"")}s(H,E)}}return T&&ze(R,T),{cbId:T,bnd:R}}}let n; var r=this!=0; const i=Re.call(arguments); var o=i[0];return `${o}`===o&&r&&(n=o,i.shift(),o=i[0]),e.apply(1,i)},l=function(e,t){return arguments.length===1&&(t=e,e=""),p(t)?new Qe(e,t):new Ke(e,t)},v.getDeps=function(){const e=arguments;return function(){for(var t,n,r=[],i=e.length;i--;)t=e[i--],(n=e[i])&&(r=r.concat(c(n)?n(t,t):n));return r}},t.observable=l,l._fltr=function(e,t,n,r){if(!r||!c(r)||r(e,t,n))return typeof(t=c(t)?t.set&&t.call(n[0]):t)===B&&t},l.Object=Ke,l.Array=Qe,t.observe=l.observe=s,t.unobserve=l.unobserve=function(){return[].push.call(arguments,!0),s.apply(this,arguments)},l._apply=Je,Ke.prototype={_data:null,observeAll:Ze,unobserveAll:et,data(){return this._data},setProperty(e,t,n){let r; let i; let o; const a=`${e=e||""}`!==e; const s=this; let l=s._data;if(l)if(a)if(n=t,p(e))for(r=e.length;r--;)i=e[r],s.setProperty(i.name,i.value,void 0===n||n);else for(r in e)s.setProperty(r,e[r],n);else if(e!==u){for(o=e.split(/[.^]/);l&&o.length>1;)l=l[o.shift()];l&&s._setProperty(l,o[0],t,n)}return s},removeProperty(e){return this.setProperty(e,qe),this},_setProperty(e,t,n,r){let i; let o; let a; let s=t?e[t]:e;c(s)&&s.set&&(e=e._wrp||e,i=!0===(o=s).set?o:o.set,s=o.call(e)),(s!==n||r&&s!=n)&&(!(s instanceof Date)||s>n||s<n)&&(i?(i.call(e,n),n=o.call(e)):(a=n===qe)?void 0!==s?(delete e[t],n=void 0):t=void 0:t&&(e[t]=n),t&&this._trigger(e,{change:"set",path:t,value:n,oldValue:s,remove:a}))},_trigger(e,n){t(e).triggerHandler(Ue+(this._ns?`.${/^\S+/.exec(this._ns)[0]}`:""),n)}},Qe.prototype={_data:null,observeAll:Ze,unobserveAll:et,data(){return this._data},insert(e,t){const n=this._data;return arguments.length===1&&(t=e,e=n.length),(e=xe(e))>-1&&(t=p(t)?t:[t]).length&&this._insert(e,t),this},_insert(e,t){const n=this._data; const r=n.length;e>r&&(e=r),we.apply(n,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t},r)},remove(e,t){let n; const r=this._data;return void 0===e&&(e=r.length-1),e=xe(e),(t=t?xe(t):t===0?0:1)>0&&e>-1&&(t=(n=r.slice(e,e+t)).length)&&this._remove(e,t,n),this},_remove(e,t,n){const r=this._data; const i=r.length;r.splice(e,t),this._trigger({change:"remove",index:e,items:n},i)},move(e,t,n){return n=n?xe(n):n===0?0:1,e=xe(e),t=xe(t),n>0&&e>-1&&t>-1&&e!==t&&this._move(e,t,n),this},_move(e,t,n){let r; const i=this._data; const o=i.length; const a=e+n-o;a>0&&(n-=a),n&&(r=i.splice(e,n),t>i.length&&(t=i.length),we.apply(i,[t,0].concat(r)),this._trigger({change:"move",oldIndex:e,index:t,items:r},o))},refresh(e,t){function n(){o&&(l.insert(i-o,u),h+=o,r+=o,o=0,u=[])}let r; let i; let o; let a; let s; var l=this; var u=[]; const c=l._data; const p=c.slice(); const f=c.length; var h=f; const d=e.length;for(l._srt=!0,i=o=0;i<d;i++)if((a=e[i])===c[i-o])n();else{for(r=i-o;r<h&&a!==c[r];r++);if(r<h){for(n(),s=0;s++<d-r&&e[i+s]===c[r+s];);l.move(r,i,s),i+=s-1}else o++,u.push(a)}return n(),h>i&&l.remove(i,h-i),l._srt=void 0,l._trigger({change:"refresh",oldItems:p},f),l},_trigger(e,n){const r=this; const i=r._data; const o=i.length; const a=t([i]);r._srt?e.refresh=!0:o!==n&&a.triggerHandler(Ue,{change:"set",path:"length",value:o,oldValue:n}),a.triggerHandler(De+(r._ns?`.${/^\S+/.exec(r._ns)[0]}`:""),e)}},Se[Ue]=Se[De]={remove(e){let n; let r; let i; let o; let a; let s=e.data;if(s&&(s.off=!0,s=s.cb)&&(n=je[s._cId])){for(o=(i=t._data(this).events[e.type]).length;o--&&!r;)r=(a=i[o].data)&&a.cb&&a.cb._cId===s._cId;r||(delete n[Be(this).obId],ze(n,s._cId))}}},a.map=function(e){function n(t,n,r,i){let o; const a=this;this.src&&this.unmap(),typeof t===B&&(a.src=t,a.tgt=r||a.tgt||[],a.options=n||a.options,a.update(),i||(e.obsSrc&&l(a.src).observeAll(a.obs=function(t,n){o||(o=!0,e.obsSrc(a,t,n),o=void 0)},a.srcFlt),e.obsTgt&&l(a.tgt).observeAll(a.obt=function(t,n){o||(o=!0,e.obsTgt(a,t,n),o=void 0)},a.tgtFlt)))}return c(e)&&(e={getTgt:e}),e.baseMap&&(e=t.extend({},e.baseMap,e)),e.map=function(e,t,r,i){return new n(e,t,r,i)},(n.prototype={srcFlt:e.srcFlt||nt,tgtFlt:e.tgtFlt||nt,update(t){const n=this;l(n.tgt).refresh(e.getTgt(n.src,n.options=t||n.options))},unmap(){const e=this;e.src&&(e.obs&&l(e.src).unobserveAll(e.obs,e.srcFlt),e.obt&&l(e.tgt).unobserveAll(e.obt,e.tgtFlt),e.src=void 0)},map:n,_def:e}).constructor=n,e},v.advSet=function(){v._gccb=this._gccb,e._jsv=_.advanced._jsv?{cbBindings:je}:void 0}}if(m=a.settings,_=v.settings,y=_.advanced,h=a.converters,t.templates=f=a.templates,g=a.tags,U=/<(?!script)(\w+)[>\s]/,t.link)return t;_.trigger=!0;let rt; let it; let ot; let at; let st; let lt; let ut; let ct; const pt="data-jsv"; const ft="change.jsv"; const ht="onBeforeChange"; const dt="onAfterChange"; const gt="checked"; const vt="checkbox"; const _t="radio"; const yt="none"; const mt="SCRIPT"; const Et="true"; const It='"><\/script>'; const Tt='<script type="jsv'; const At="script,[data-jsv]"; const bt={value:"val",input:"val",html:H,text:"text"}; const Ot={from:"value",to:"value"}; let Ct=0; const Nt=t.cleanData; const Lt=m.delimiters; const St=document.createDocumentFragment(); const Rt=document.querySelector; const wt={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1}; const Pt={tr:"table"}; const xt={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1}; const Mt={}; const Ut={}; let Dt=1; const jt=/^#(view\.?)?/; const Vt=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g; const kt=/(#)()(\d+)(_)/g; const Gt=/(#)()(\d+)([_^])/g; const Ft=/(?:(#)|(\/))(\d+)(_)/g; const Ht=/(#)()(\d+)(\^)/g; const Bt=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g; const qt=/&(\d+)\+?/g; const Yt=e.getComputedStyle;if(!(l=t.observable))throw `${requiresStr}JsObservable`;function Kt(e,n,r){for(var i,o,a,s,u,p,f,h,d,g,v,_,y,m,E,I,T,A=e.target,b=A._jsvBnd;d=qt.exec(b);)if((d=Ut[d[1]])&&(m=d.to)){if(h=(a=d.linkCtx).view,y=a.tag||h.tag,f=t(A),v=h.hlp(ht),_=h.hlp(dt),o=Jt(A),i=bt[o],void 0===r&&(r=c(o)?o(A):i?f[i]():f.attr(o)),u=m[1],m=`${m=m[0]}`===m?[a.data,m]:m,u&&(s=c(u)?u:h.getRsc("converters",u)),a.elem.nodeName==="SELECT"&&(a.elem._jsvSel=r=r||(a.elem.multiple?[]:r)),s&&(r=s.call(y,r)),g=h.linkCtx,h.linkCtx=a,E={change:"change",oldValue:a._val,value:r},!(v&&!1===v.call(a,e,E)||y&&y.onBeforeChange&&!1===y.onBeforeChange(e,E)||void 0===r)&&(p=m[0],void 0!==r&&p)){if(p._jsv)for(T=a._ctxCb,I=p,p=a.data,I._cpCtx&&(p=I.data,T=I._cpCtx);I&&I.sb;)p=T(I,p),I=I.sb;y&&(y._.chging=!0),l(p).setProperty(m[1],r),_&&_.call(a,e,E),y&&(y.onAfterChange&&y.onAfterChange(e,E),y._.chging=void 0),a._val=r}h.linkCtx=g}}function Qt(e,n,r){let i; let o; let a; let s; let l; let u; const p=this; let f=p.tag; const h=p.data; const d=p.elem; let g=p.convert; const _=d.parentNode; const y=p.view; const m=y.linkCtx; let E=y.hlp(ht);if(y.linkCtx=p,_&&(!E||!n||!1!==E.call(p,e,n))&&(!n||e.data.prop==="*"||e.data.prop===n.path)){if(n&&(p.eventArgs=n),n||p._toLk){if(p._toLk=0,r._er)try{o=r(h,y)}catch(e){l=r._er,o=[{props:{},args:[u=ve(e,y,new Function("data,view",`return ${l};`)(h,y))]}]}else o=r(h,y,v);if(i=function(e,n,r,i){let o; let a; let s; let l; const u=r&&r.parentElem||n.elem;if(void 0!==e){if(l=t(u),i=r&&r.attr||i,c(e)&&_e(`${n.expr}: missing parens`),s=/^css-/.test(i)&&i.slice(4))o=t.style(u,s),+e===e&&(o=parseInt(o));else if(i!=="link"){if(i==="value")u.type===vt&&(o=l.prop(i=gt));else if(i===_t){if(u.value!==`${e}`)return i;o=l.prop(gt)}void 0===o&&(o=(a=bt[i])?l[a]():l.attr(i))}n._val=o}return i}(o,p,f=p.tag,p.attr||Jt(d,!0,void 0!==g)),f){if(s=l||f._er,o=o[0]?o:[o],a=!s&&n&&f.onUpdate&&!1===f.onUpdate(e,n,o),_n(f,o,s),a||i===yt)return hn(f,e,n),tn(p,h,d),void(y.linkCtx=m);if(f._.chging)return;f.onUnbind&&f.onUnbind(f.tagCtx,p,f.ctx,e,n),o=f.tagName===":"?v._cnvt(f.cvt,y,o[0]):v._tag(f,y,y.tmpl,o,!0,u)}else r._tag&&(o=(g=g===""?Et:g)?v._cnvt(g,y,o[0]||o):v._tag(r._tag,y,y.tmpl,o,!0,u),An(f=p.tag,!0),i=p.attr||i);Xt(o,p,i,f)&&n&&(E=y.hlp(dt))&&E.call(p,e,n),p._noUpd=0,f&&(f._er=l,hn(f,e,n))}tn(p,h,d),y.linkCtx=m}}function Wt(e,t){e._df=t,e[`${t?"set":"remove"}Attribute`]("data-jsv-df","")}function Xt(n,r,i,o){let a; let s; let l; let u; let c; let f; let h; let d; let g; let v; let _; let y; let m; let E; let I=i!==yt&&void 0!==n&&!r._noUpd; const T=r.data; const A=o&&o.parentElem||r.elem; const b=A.parentNode; const O=t(A); const C=r.view; const N=r._val; const L=C.linkCtx; let S=o;if(o&&(o._.unlinked=!0,o.parentElem=o.parentElem||r.expr||o._elCnt?A:b,s=o._prv,l=o._nxt),I)return i==="visible"&&(i="css-display"),/^css-/.test(i)?(r.attr==="visible"&&(m=(A.currentStyle||Yt.call(e,A,"")).display,n?(n=A._jsvd||m)!==yt||(n=Mt[y=A.nodeName])||(_=document.createElement(y),document.body.appendChild(_),n=Mt[y]=(_.currentStyle||Yt.call(e,_,"")).display,document.body.removeChild(_)):(A._jsvd=m,n=yt)),(S=S||N!==n)&&t.style(A,i.slice(4),n)):i!=="link"&&(/^data-/.test(i)&&t.data(A,i.slice(5),n),i===gt?(f=!0,n=n&&n!=="false"):i===_t?(f=!0,i=gt,n=A.value===`${n}`):i==="selected"||i==="disabled"||i==="multiple"||i==="readonly"?n=n&&n!=="false"?i:null:i==="value"&&A.nodeName==="SELECT"&&(A._jsvSel=p(n)?n:`${n}`),(a=bt[i])?i===H?(C.linkCtx=r,o&&o._.inline?(c=o.nodes(!0),o._elCnt&&(s&&s!==l?In(s,l,A,o._tgId,"^",!0):(h=A._df)&&(d=`${o._tgId}^`,g=h.indexOf(`#${d}`)+1,v=h.indexOf(`/${d}`),g&&v>0&&v>(g+=d.length)&&(Wt(A,h.slice(0,g)+h.slice(v)),Tn(h.slice(g,v)))),s=s?s.previousSibling:l?l.previousSibling:A.lastChild),t(c).remove(),u=C.link(C.data,A,s,l,n,o&&{tag:o._tgId,lazyLink:o.tagCtx.props.lazyLink})):((I=I&&N!==n)&&O.empty(),I&&(u=C.link(T,A,s,l,n,o&&{tag:o._tgId}))),C.linkCtx=L):((S=S||N!==n)&&(i==="text"&&A.children&&!A.children[0]?void 0!==A.textContent?A.textContent=n:A.innerText=n===null?"":n:O[a](n)),!(E=b._jsvSel)||i!=="value"&&O.attr("value")||(A.selected=t.inArray(`${n}`,p(E)?E:[E])>-1)):(S=S||N!==n)&&O[f?"prop":"attr"](i,void 0!==n||f?n:null),r._val=n),u||S}function zt(e,t){const n=this; const r=n.hlp(ht); const i=n.hlp(dt);if(!r||!1!==r.call(this,e,t)){if(t){const o=t.change; const a=t.index; const s=t.items;switch(n._.srt=t.refresh,o){case"insert":n.addViews(a,s);break;case"remove":n.removeViews(a,s.length);break;case"move":n.removeViews(t.oldIndex,s.length,void 0,!0),n.addViews(a,s);break;case"refresh":n._.srt=void 0,n.fixIndex(0)}}i&&i.call(this,e,t)}}function $t(e){let n; let r; const i=e.type; const o=e.data; const a=e._.bnd;!e._.useKey&&a&&((r=e._.bndArr)&&(t([r[1]]).off(De,r[0]),e._.bndArr=void 0),a!==!!a?i?a._.arrVws[e._.id]=e:delete a._.arrVws[e._.id]:i&&o&&(n=function(t){t.data&&t.data.off||zt.apply(e,arguments)},t([o]).on(De,n),e._.bndArr=[n,o]))}function Jt(e,t,n){const r=e.nodeName.toLowerCase(); const i=y._fe[r]||e.contentEditable===Et&&{to:H,from:H};return i?t?r==="input"&&e.type===_t?_t:i.to:i.from:t?n?"text":H:""}function Zt(e,n,r,i,o,a,s){let l; let u; let c; let p; let f; const h=e.parentElem; let d=e._prv; const g=e._nxt; const v=e._elCnt;if(d&&d.parentNode!==h&&_e("Missing parentNode"),s)for(f in p=e.nodes(),v&&d&&d!==g&&In(d,g,h,e._.id,"_",!0),e.removeViews(void 0,void 0,!0),u=g,v&&(d=d?d.previousSibling:g?g.previousSibling:h.lastChild),t(p).remove(),e._.bnds)mn(f);else{if(n){if(!(c=i[n-1]))return!1;d=c._nxt}v?d=(u=d)?u.previousSibling:h.lastChild:u=d.nextSibling}l=r.render(o,a,e._.useKey&&s,e,s||n,!0),e.link(o,h,d,u,l,c)}function en(e,t,n){let r; let i;return n?(i="^`",An(n,!0),(r=n._tgId)||(Ut[r=Dt++]=n,n._tgId=`${r}`)):(i="_`",An(ut[r=t._.id]=t)),`#${r}${i}${e!=null?e:""}/${r}${i}`}function tn(e,t,n){let r; let i; let o; let a; let s; let u; let p; let f; const h=e.tag; const d=e.convertBack; let g=[]; const v=e._bndId||`${Dt++}`; const _=e._hdl;if(e._bndId=void 0,h&&(g=h.depends||g,g=c(g)?h.depends(h):g,a=h.linkedElem),!e._depends||`${e._depends}`!=`${g}`){if(e._depends&&l._apply(!1,[t],e._depends,_,!0),s=e.fn.deps.slice(),h&&h.boundProps)for(i=h.boundProps.length;i--;)for(p=h.boundProps[i],o=h._.bnd.paths.length;o--;)(f=h._.bnd.paths[o][p])&&f.skp&&(s=s.concat(f));for(i=s.length;i--;)(u=s[i])._jsv&&(s[i]=re({},u));if((r=l._apply(!1,[t],s,g,_,e._ctxCb)).elem=n,r.linkCtx=e,r._tgId=v,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+=`&${v}`,e._depends=g,e.view._.bnds[v]=v,Ut[v]=r,a)for(i=a.length;i--;)a[i]._jsvLkEl=h,vn(r,h,a[i]),a[i]._jsvBnd=`&${r._tgId}+`;else void 0!==d&&vn(r,h,n,d);h&&(h.flow||h._.inline||(n.setAttribute(pt,`${n.getAttribute(pt)||""}#${v}^/${v}^`),h._tgId=`${v}`))}}function nn(e,t,n,r,i,o,a){return rn(this,e,t,n,r,i,o,a)}function rn(e,n,r,i,a,s,l,u){if(!0===i?(a=i,i=void 0):i=typeof i!=="object"?void 0:re({},i),e&&n){n=n.jquery?n:t(n),rt||(rt=document.body,t(rt).on(ft,Kt).on("blur","[contenteditable]",Kt));for(var c,p,f,h,d,g,v,_,y,m=en,E=i&&i.target==="replace",I=n.length;I--;){if(v=n[I],(y=(s=s||ot(v))===o)&&(o.data=(o.ctx=i||{}).root=r),`${e}`===e)an(e,v,s,void 0,!0,r,i);else{if(void 0!==e.markup)E&&(g=v.parentNode),f=e.render(r,i,a,s,void 0,m),g?(l=v.previousSibling,u=v.nextSibling,t.cleanData([v],!0),g.removeChild(v),v=g):(l=u=void 0,t(v).empty());else{if(!0!==e||s!==o)break;_={lnk:1}}if(v._df&&!u){for(c=0,p=(h=cn(v._df,!0,kt)).length;c<p;c++)d=h[c],(d=ut[d.id])&&void 0!==d.data&&d.parent.removeViews(d._.key,void 0,!0);Wt(v)}s.link(r,v,l,u,f,_,i)}y&&(o.data=o.ctx=void 0)}}return n}function on(e,n,r,i,o,a,s,l){function u(e,t){let r; let i; let o; let a; let s; let l; let u; const c=[];if(e){for(e._tkns.charAt(0)==="@"&&(t=I.previousSibling,I.parentNode.removeChild(I),I=void 0),m=e.length;m--;){if(o=(A=e[m]).ch,r=A.path)for(_=r.length-1;i=r.charAt(_--);)i==="+"?r.charAt(_)==="-"?(_--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;o==="^"?(d=Ut[s=A.id])&&(u=t&&(!I||I.parentNode!==t),I&&!u||(d.parentElem=t),A.elCnt&&u&&Wt(t,(A.open?"#":"/")+s+o+(t._df||"")),c.push([u?null:I,A])):(T=ut[s=A.id])&&(T.parentElem||(T.parentElem=t||I&&I.parentNode||n,T._.onRender=en,T._.onArrayChange=zt,$t(T)),a=T.parentElem,A.open?(T._elCnt=A.elCnt,t&&!I?Wt(t,`#${s}${o}${t._df||""}`):(T._prv||Wt(a,ln(a._df,`#${s}${o}`)),T._prv=I)):(!t||I&&I.parentNode===t?I&&(T._nxt||Wt(a,ln(a._df,`/${s}${o}`)),T._nxt=I):(Wt(t,`/${s}${o}${t._df||""}`),T._nxt=void 0),(l=T.ctx&&T.ctx.onAfterCreate||le)&&l.call(T.ctx.tag,T)))}for(m=c.length;m--;)oe.push(c[m])}return!e||e.elCnt}function c(e){let t; let n; let r;if(e)for(m=e.length,_=0;_<m;_++)if(A=e[_],n=d=Ut[A.id].linkCtx.tag,r=d.tagName===P,!d.flow||r){if(!w){for(t=1;n=n.parent;)t++;D=D||t}!w&&t!==D||P&&!r||R.push(d)}}function p(){let a; let l; let p=""; const f={}; const _=st+(te?",[data-jsv-df]":"");for(E=Rt?n.querySelectorAll(_):t(_,n).get(),v=E.length,r&&r.innerHTML&&(O=Rt?r.querySelectorAll(_):t(_,r).get(),r=O.length?O[O.length-1]:r),D=0,g=0;g<v;g++)if(I=E[g],r&&!$)$=I===r;else{if(i&&I===i){te&&(p+=un(I));break}if(I.parentNode)if(te){if(p+=un(I),I._df){for(a=g+1;a<v&&I.contains(E[a]);)a++;f[a-1]=I._df}f[g]&&(p+=f[g]||"")}else ee&&(A=cn(I,void 0,Ft))&&(A=A[0])&&(J=J?A.id!==J&&J:A.open&&A.id),!J&&ue(cn(I))&&I.getAttribute(at)&&oe.push([I])}if(te&&((l=(p+=n._df||"").indexOf(`#${te.id}`)+1)&&(p=p.slice(l+te.id.length)),(l=p.indexOf(`/${te.id}`))+1&&(p=p.slice(0,l)),c(cn(p,void 0,Ht))),void 0===o&&n.getAttribute(at)&&oe.push([n]),pn(r,K),pn(i,K),te)Z&&Z.resolve();else{for(K&&ie+X&&(I=i,ie&&(i?u(cn(`${ie}+`,!0),i):u(cn(ie,!0),n)),u(cn(X,!0),n),i&&(p=i.getAttribute(pt),(v=p.indexOf(z)+1)&&(p=p.slice(v+z.length-1)),i.setAttribute(pt,X+p))),v=oe.length,g=0;g<v;g++)I=oe[g],b=I[1],I=I[0],b?(d=Ut[b.id])&&((h=d.linkCtx)&&((d=h.tag).linkCtx=h),b.open?(I&&(d.parentElem=I.parentNode,d._prv=I),d._elCnt=b.elCnt,T=d.tagCtx.view,an(void 0,d._prv,T,b.id)):(d._nxt=I,d._.unlinked&&(x=d.tagCtx,T=x.view,hn(d)))):an(I.getAttribute(at),I,ot(I),void 0,ee,e,s);Z&&Z.resolve()}}let f; let h; let d; let g; let v; let _; let m; let E; let I; let T; let A; let b; let O; let C; let N; let L; let S; let R; let w; let P; let x; let M; let D; let j; let V; let k; let G; let F; let H; let B; let q; let Y; let K; let Q; let W; let X; let z; let $; let J; let Z; let ee; let te; const ne=this; let re=`${ne._.id}_`; var ie=""; var oe=[]; const ae=[]; const se=[]; var le=ne.hlp("onAfterCreate"); var ue=u;if(a&&(Z=a.lazyLink&&t.Deferred(),a.tmpl?N=`/${a._.id}_`:(ee=a.lnk,a.tag&&(re=`${a.tag}^`,a=!0),(te=a.get)&&(ue=c,R=te.tags,w=te.deep,P=te.name)),a=!0===a),n=n?`${n}`===n?t(n)[0]:n.jquery?n[0]:n:ne.parentElem||document.body,M=!y.noValidate&&n.contentEditable!==Et,F=n.tagName.toLowerCase(),K=!!wt[F],r=r&&fn(r,K),i=i&&fn(i,K)||null,o!=null){if(B=q=document.createElement("div"),z=X="",W=n.namespaceURI==="http://www.w3.org/2000/svg"?"svg_ns":(G=U.exec(o))&&G[1]||"",K){for(S=i;S&&!(L=cn(S));)S=S.nextSibling;(Y=L?L._tkns:n._df)&&(C=N||"",!a&&N||(C+=`#${re}`),(_=Y.indexOf(C))+1&&(_+=C.length,z=X=Y.slice(0,_),Y=Y.slice(_),L?S.setAttribute(pt,Y):Wt(n,Y)))}if(H=void 0,o=(`${o}`).replace(Vt,((e,t,n,r,i,a,s,l,u,c,p,h,g,v) =>{let _; let y; let m="";return v?(f=0,e):(d=u||c||"",r=r||p,n=n||g,H&&!n&&(!e||r||d||a&&!f)&&(H=void 0,F=ae.shift()),(r=r||n)&&(f=0,H=void 0,M&&(n||g?xt[F]||/;svg;|;math;/.test(`;${ae.join(";")};`)||(_=`'<${F}.../`):xt[r]?_=`'</${r}`:ae.length&&r===F||(_=`Mismatch: '</${r}`),_&&ye(`${_}>' in:\n${o}`)),Q=K,F=ae.shift(),K=wt[F],p=p?`</${p}>`:"",Q&&(ie+=X,X="",K?ie+="-":(m=`${p+Tt}@${ie}${It}${h||""}`,ie=se.shift()))),K?(a?X+=a:t=p||g||"",d&&(t+=d,X&&(t+=` data-jsv="${X}"`,X=""))):t=a?t+m+i+(f?"":Tt+a+It)+l+d:m||e,M&&s&&(f&&ye(`{^{ within elem markup (${f} ). Use data-link="..."`),a.charAt(0)==="#"?ae.unshift(a.slice(1)):a.slice(1)!==(y=ae.shift())&&ye(`Closing tag for {^{...}} under different elem: <${y}>`)),d&&(f=d,ae.unshift(F),F=d.slice(1),M&&ae[0]&&ae[0]===Pt[F]&&_e("Parent of <tr> must be <tbody>"),H=xt[F],(K=wt[F])&&!Q&&(se.unshift(ie),ie=""),Q=K,ie&&K&&(ie+="+")),t)})),M&&ae.length&&ye(`Mismatched '<${F}...>' in:\n${o}`),l)return;for(St.appendChild(q),j=(W=lt[W]||lt.div)[0],B.innerHTML=W[1]+o+W[2];j--;)B=B.lastChild;for(St.removeChild(q),V=document.createDocumentFragment();k=B.firstChild;)V.appendChild(k);n.insertBefore(V,i)}return Z?setTimeout(p,0):p(),Z&&Z.promise()}function an(e,n,r,i,o,a,s){let l; let u; let c; let p; let f; let h; let d; let g; let _; let y; let m; const b=[];if(i)sn(d=(g=(g=Ut[i]).linkCtx?g.linkCtx.tag:g).linkCtx||{type:"inline",data:r.data,elem:g._elCnt?g.parentElem:n,view:r,ctx:r.ctx,attr:H,fn:g._.bnd,tag:g,_bndId:i},d.fn);else if(e&&n){for(a=o?a:r.data,l=r.tmpl,e=function(e,n){return(e=t.trim(e).replace(P,"\\$&")).slice(-1)!==T?e=`${I}:${e}${n?":":""}${T}`:e}(e,Jt(n)),m=it.lastIndex=0;u=it.exec(e);)b.push(u),m=it.lastIndex;for(m<e.length&&ye(e);u=b.shift();){for(_=it.lastIndex,c=u[1],f=u[3];b[0]&&b[0][4]==="else";)f+=A+E+b.shift()[3],y=!0;y&&(f+=`${A+E+I}/${u[4]}${T}`),d={type:o?"top":"link",data:a,elem:n,view:r,ctx:s,attr:c,isLk:o,_toLk:1,_noUpd:u[2]},p=void 0,u[6]&&(p=u[10]||void 0,d.convert=u[5]||"",!c&&void 0!==p&&Jt(n)&&(d.convertBack=p=p.slice(1))),d.expr=c+f,(h=l.links[f])||(l.links[f]=h=v.tmplFn(f,l,!0,p,y)),d.fn=h,sn(d,h),it.lastIndex=_}}}function sn(e,t){function n(n,r){Qt.call(e,n,r,t)}n.noArray=!0,e.isLk&&An(e.view=new v.View(v.extendCtx(e.ctx,e.view.ctx),"link",e.view,e.data,e.expr,void 0,en)),e._ctxCb=v._gccb(e.view),e._hdl=n,n(!0)}function ln(e,t){let n;return e?(n=e.indexOf(t))+1?e.slice(0,n)+e.slice(n+t.length):e:""}function un(e){return e&&(`${e}`===e?e:e.tagName===mt?e.type.slice(3):e.nodeType===1&&e.getAttribute(pt)||"")}function cn(e,t,n){let r; let i; const o=[];if(i=t?e:un(e))return r=o.elCnt=e.tagName!==mt,r=i.charAt(0)==="@"||r,o._tkns=i,i.replace(n||Bt,((e,t,n,i,a,s) =>{o.push({elCnt:r,id:i,ch:a,open:t,close:n,path:s,token:e})})),o}function pn(e,t){e&&(e.type==="jsv"?e.parentNode.removeChild(e):t&&e.getAttribute(at)===""&&e.removeAttribute(at))}function fn(e,t){for(var n=e;t&&n&&n.nodeType!==1;)n=n.previousSibling;return n&&(n.nodeType!==1?((n=document.createElement(mt)).type="jsv",e.parentNode.insertBefore(n,e)):un(n)||n.getAttribute(at)||n.setAttribute(at,"")),n}function hn(e,n,r){let i; let o; let a; let s; let l; let u; const c=e.tagCtx; const p=(c.view,c.props); const f=e.linkCtx;if(e._.unlinked&&(void 0!==e.linkedElement&&(e.linkedElem=e._.inline?e.contents(!0,e.linkedElement||"*").first():t(f.elem)),e.onBind&&e.onBind(c,f,e.ctx,n,r)),e.onAfterLink&&e.onAfterLink(c,f,e.ctx,n,r),i=e.targetTag?e.targetTag.linkedElem:e.linkedElem,o=e.displayElem||i,i&&i[0]){if(void 0!==(s=e.cvtArgs()[0])&&!e._.chging)for(l=i.length;l--;)a=i[l],e._.unlinked&&a!==f.elem&&(u=a._jsvLkEl,e._.inline&&(!u||u!==e&&u.targetTag!==e)&&(a._jsvLkEl=e,vn(Ut[e._tgId],e,a),a._jsvBnd=`&${e._tgId}+`)),void 0!==s&&(void 0!==a.value?a.type===vt?a.checked=s&&s!=="false":a.type===_t?a.checked=a.value===s:t(a).val(s):a.contentEditable===Et&&(a.innerHTML=s),f._val=s),p.name&&(a.name=a.name||p.name);e.setSize&&(p.height&&o.height(p.height),p.width&&o.width(p.width)),void 0!==p.title&&o.attr("title",p.title),p.class&&(r&&o.hasClass(r.oldValue)&&o.removeClass(r.oldValue),o.addClass(p.class)),p.id&&(i[0].id=p.id)}e._.unlinked=void 0}function dn(e){setTimeout((() =>{Kt(e)}),0)}function gn(e,t,n){t&&(t=`${t}`===t?t:"keydown",e[n](t,t==="keydown"?dn:Kt))}function vn(e,n,r,i){let o; let a; let s; let l; let u; let c; let p; let f; let h; const d=e.linkCtx; let g=d._ctxCb; let y=d.data; let m=d.fn.paths[0];if(n=n||r._jsvLkEl,e&&m&&!e.to){if(p=r._jsvTr||!1,n&&(i=n.convertBack||i,c=n.tagCtx.props.trigger),p!==(c=(c=void 0===c?_.trigger:c)&&(r.tagName==="INPUT"&&r.type!==vt&&r.type!==_t||r.type==="textarea"||r.contentEditable===Et)&&c||!1)&&(gn(u=t(r),p,"off"),gn(u,r._jsvTr=c,"on")),o=(m=m._jsvto||m[0])&&m.length){if((s=m[o-1])._jsv){for(l=s;s.sb&&s.sb._jsv;)a=s=s.sb;s=(a=s.sb||a&&a.path)?a.slice(1):l.path}if(a)f=[l,s];else{for(;(f=g(a=s.split("^").join("."),y))&&(h=f.length);){if(f[0]._cp){if(f=f[0],g=v._gccb(f[0]),s=f[1],f=[f[0].data,f[1]],s._jsv){for((l=s).data=f[0],l._cpCtx=g;s.sb&&s.sb._jsv;)a=s=s.sb;f=[l,s=(a=s.sb||a&&a.path)?a.slice(1):l.path]}}else f=h>2?[f[h-3],f[h-2]]:[f[h-2]];y=f[0],s=f[1]}f=f||[y,a]}}else f=[];e.to=[f,i]}}function _n(e,t,n){let r; let i; const o=e.tagCtx.view; let a=e.tagCtxs||[e.tagCtx]; let s=a.length; const u=!t;if(t=t||e._.bnd.call(o.tmpl,(e.linkCtx||o).data,o,v),n)a=e.tagCtxs=t,e.tagCtx=a[0];else for(;s--;)r=a[s],i=t[s],l(r.props).setProperty(i.props),re(r.ctx,i.ctx),r.args=i.args,u&&(r.tmpl=i.tmpl);return v._ths(e,a[0]),a}function yn(e){for(var t,n,r,i=[],o=e.length,a=o;a--;)i.push(e[a]);for(a=o;a--;)if((n=i[a]).parentNode){if(r=n._jsvBnd)for(r=r.slice(1).split("&"),n._jsvBnd="",t=r.length;t--;)mn(r[t],n._jsvLkEl,n);Tn(un(n)+(n._df||""))}}function mn(e,n,r){let i; let o; let a; let s; let l; let u; let c; let f; let h; let d; let g; let v; const _=Ut[e];if(n)n=n.targetTag||n,r._jsvLkEl=void 0;else if(_){for(i in delete Ut[e],_.bnd)s=_.bnd[i],l=_.cbId,p(s)?t([s]).off(De+l).off(Ue+l):t(s).off(Ue+l),delete _.bnd[i];if(o=_.linkCtx){if(a=o.tag){if(u=a.tagCtxs)for(c=u.length;c--;)(f=u[c].map)&&f.unmap();h=a.linkedElem,a.onUnbind&&a.onUnbind(a.tagCtx,o,a.ctx,!0),a.onDispose&&a.onDispose(),a._elCnt||(a._prv&&a._prv.parentNode.removeChild(a._prv),a._nxt&&a._nxt.parentNode.removeChild(a._nxt))}(g=(d=h&&h[0]||o.elem)&&d._jsvTr)&&(gn(h||t(d),g,"off"),d._jsvTr=void 0),(v=o.view).type==="link"?v.parent.removeViews(v._.key,void 0,!0):delete v._.bnds[e]}delete je[_.cbId]}}function En(e){e?((e=e.jquery?e:t(e)).each((function(){for(var e;(e=ot(this,!0))&&e.parent;)e.parent.removeViews(e._.key,void 0,!0);yn(this.getElementsByTagName("*"))})),yn(e)):(rt&&(t(rt).off(ft,Kt).off("blur","[contenteditable]",Kt),rt=void 0),o.removeViews(),yn(document.body.getElementsByTagName("*")))}function In(e,t,n,r,i,o){let a; let s; let l; let u; let c; let p; let f; let h=0; const d=e===t;if(e){for(a=0,s=(l=cn(e)||[]).length;a<s;a++){if((p=(u=l[a]).id)===r&&u.ch===i){if(!o)break;s=0}d||(c=u.ch==="_"?ut[p]:Ut[p].linkCtx.tag,u.open?c._prv=t:u.close&&(c._nxt=t)),h+=p.length+2}h&&e.setAttribute(pt,e.getAttribute(pt).slice(h)),(s=(f=t?t.getAttribute(pt):n._df).indexOf(`/${r}${i}`)+1)&&(f=l._tkns.slice(0,h)+f.slice(s+(o?-1:r.length+1))),f&&(t?t.setAttribute(pt,f):Wt(n,f))}else Wt(n,ln(n._df,`#${r}${i}`)),o||t||Wt(n,ln(n._df,`/${r}${i}`))}function Tn(e){let t; let n; let r; let i;if(i=cn(e,!0,Gt))for(t=0,n=i.length;t<n;t++)(r=i[t]).ch==="_"?(r=ut[r.id])&&r.type&&r.parent.removeViews(r._.key,void 0,!0):mn(r.id)}function An(e,n){e.contents=function(e,n){e!==!!e&&(n=e,e=void 0);let r; let i=t(this.nodes());return i[0]&&(r=n?i.filter(n):i,i=e&&n?r.add(i.find(n)):r),i},e.nodes=function(e,t,n){let r; const i=this; const o=i._elCnt; const a=!t&&o; const s=[];for(t=t||i._prv,n=n||i._nxt,r=a?t===i._nxt?i.parentElem.lastSibling:t:!1===i._.inline?t||i.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!n||r!==n);)(e||o||r.tagName!==mt)&&s.push(r),r=r.nextSibling;return s},e.childTags=function(e,t){e!==!!e&&(t=e,e=void 0);const n=this; const r=n.link?n:n.tagCtx.view; const i=n._prv; const o=n._elCnt; const a=[];return r.link(void 0,n.parentElem,o?i&&i.previousSibling:i,n._nxt,void 0,{get:{tags:a,deep:e,name:t,id:n.link?`${n._.id}_`:`${n._tgId}^`}}),a},e.refresh=function(e){let t; const n=this; const r=n.linkCtx; const i=n.tagCtx.view;return n.disposed&&_e("Removed tag"),void 0===e&&(e=v._tag(n,i,i.tmpl,_n(n),!0)),`${e}`===e&&(n.onUnbind&&n.onUnbind(n.tagCtx,r,n.ctx),t=Xt(e,r,n._.inline?H:r.attr||Jt(n.parentElem,!0),n)),hn(n),t||n},e.update=function(e){const t=this.linkedElem;t&&Kt({target:t[0]},0,e)},n?e.domChange=function(){const e=this.parentElem; const n=t.hasData(e)&&t._data(e).events; const r="jsv-domchange";n&&n[r]&&t(e).triggerHandler(r,arguments)}:(e.addViews=function(e,t){const n=this; const r=t.length; const i=n.views;!n._.useKey&&r&&i.length+r===n.data.length&&!1!==Zt(n,e,n.tmpl,i,t,n.ctx)&&(n._.srt||n.fixIndex(e+r))},e.removeViews=function(e,n,r,i){function o(e){let n; let i; let o; let a; let s; let l; const u=p[e];if(u&&u.link){if(n=u._.id,r||(l=u.nodes()),u.removeViews(void 0,void 0,!0),u.type=void 0,a=u._prv,s=u._nxt,o=u.parentElem,r||(u._elCnt&&In(a,s,o,n,"_"),t(l).remove()),!u._elCnt)try{a.parentNode.removeChild(a),s.parentNode.removeChild(s)}catch(e){}for(i in $t(u),u._.bnds)mn(i);delete ut[n]}}let a; let s; let l; const u=this; const c=!u._.useKey; var p=u.views;if(c&&(l=p.length),void 0===e)if(c){for(a=l;a--;)o(a);u.views=[]}else{for(s in p)o(s);u.views={}}else if(void 0===n&&(c?n=1:(o(e),delete p[e])),c&&n&&(i||l-n===u.data.length)){for(a=e+n;a-- >e;)o(a);p.splice(e,n),u._.sort||u.fixIndex(e)}},e.refresh=function(){const e=this; const t=e.parent;t&&(Zt(e,e.index,e.tmpl,t.views,e.data,void 0,!0),$t(e))},e.fixIndex=function(e){for(let t=this.views,n=t.length;e<n--;)t[n].index!==n&&l(t[n]).setProperty("index",n)},e.link=on)}function bn(e){return this.tagCtx.view}return s=l.observe,v.onStore.template=function(e,n){n.link=nn,e&&(t.link[e]=function(){return nn.apply(n,arguments)})},v.viewInfos=cn,(m.delimiters=function(){let e=Lt.apply(0,arguments);return Lt!==ie&&(e=ie.apply(0,arguments)),it=new RegExp(`(?:^|\\s*)([\\w-]*)(\\${b})?(\\${I}${v.rTag}(:\\w*)?\\${T})`,"g"),e})(),v.addSetting("trigger"),h.merge=function(e){let t; let n=this.linkCtx._val||""; const r=this.tagCtx.props.toggle;return r&&(t=`(\\s(?=${t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&")}$)|(\\s)|^)(${t}(\\s|$))`,e=(n=n.replace(new RegExp(t),"$2"))+(e?(n&&" ")+r:"")),e},g({on:{attr:yt,init(e){for(var n,r=this,i=0,o=e.args,a=o.length;i<a&&!c(o[i]);i++);r._hi=a>i&&i+1,r._.inline&&(v.rTmpl.exec(n=e.tmpl.markup)||(r.template=`<button>${t.trim(n)||e.params.args[i]||"noop"}</button>`),r.attr=H)},onAfterLink(e,n){let r; let i; let o; const a=this; const s=a._hi; let l=e.args; let u=l.length; const c=e.props; const p=c.data; const f=e.view; let h=c.context;s&&(r=l[s-1],i=l.slice(s),l=l.slice(0,s-1),a._sel=l[1],o=a.activeElem=a.activeElem||t(a._.inline?(a._sel=l[1]||"*",a.parentElem):n.elem),h||(h=(h=/^(.*)[\.^][\w$]+$/.exec(e.params.args.slice(-i.length-1)[0]))&&v.tmplFn(`${I}:${h[1]}${T}`,f.tmpl,!0)(n.data,f)),a._evs&&a.onUnbind(),o.on(a._evs=l[0]||"click",a._sel,p==null?null:p,a._hlr=function(e){let t; let o=!a._.inline;if(!o)for(t=a.contents("*"),u=t.length;!o&&u--;)t[u].contains(e.target)&&(o=!0);if(o)return r.apply(h||n.data,[].concat(i,e,{change:e.type,view:f,linkCtx:n},i.slice.call(arguments,1)))}))},onUpdate(){return!1},onUnbind(){const e=this;e.activeElem&&e.activeElem.off(e._evs,e._sel,e._hlr)},flow:!0,contentCtx:bn,dataBoundOnly:!0},radiogroup:{init(e){this.name=e.props.name||`jsv${Math.random()}`},onBind(e,n){let r; const i=this; let o=i.linkedElem=i._.inline?i.contents(!0,"input[type=radio]"):t(n.elem).find("input[type=radio]"); let a=o.length;for(r=i._.inline?(r=i.contents("*")[0])&&t.view(r).ctx.tag===i.parent?r:i.parentElem:n.elem;a--;)o[a].name=o[a].name||i.name;t(r).on("jsv-domchange",((e,t) =>{let n; const s=t.ctx.parentTags;if(!i._.inline||r!==i.parentElem||s&&s[i.tagName]===i)for(o=i.linkedElem=i.contents(!0,"input[type=radio]"),a=o.length;a--;)(n=o[a])._jsvLkEl=i,n.name=n.name||i.name,vn(Ut[i._tgId],i,n),n._jsvBnd=`&${i._tgId}+`,n.checked=i.cvtArgs()[0]===n.value}))},onUpdate(e,t,n){return!1},contentCtx:bn,dataBoundOnly:!0}}),re(g.for,{onArrayChange(e,t,n,r){let i; const o=e.target; const a=o.length; const s=this; const l=t.change;if(s._.noVws||s.tagCtxs[1]&&(l==="insert"&&a===t.items.length||l==="remove"&&!a))s.refresh();else for(i in s._.arrVws)(i=s._.arrVws[i]).data===o&&i._.onArrayChange.apply(i,arguments);s.domChange(n,r,t),e.done=!0},onAfterLink(e,t){let n; let r; let i; let o; const a=this; const l=a._ars||{}; const u=a.tagCtxs; const c=u.length; const f=a.selected||0;for(n=0;n<=f;n++)o=(e=u[n]).map?e.map.tgt:e.args.length?e.args[0]:e.view.data,(i=l[n])&&o!==i[0]&&(s(i[0],i[1],!0),delete l[n]),!l[n]&&p(o)&&(s(o,r=function(n,r){const i=e;a.onArrayChange(n,r,i,t)}),l[n]=[o,r]);for(n=f+1;n<c;n++)(i=l[n])&&(s(i[0],i[1],!0),delete l[n]);a._ars=l},onDispose(){let e; const t=this;for(e in t._ars)s(t._ars[e][0],t._ars[e][1],!0)}}),re(g.if,{onUpdate(e,t,n){let r; let i; let o;for(r=0;i=this.tagCtxs[r];r++)if(o=i.props.tmpl!==n[r].props.tmpl||i.args.length&&!(i=i.args[0])!=!n[r].args[0],!this.convert&&i||o)return o;return!1},onAfterLink(e,t,n,r,i){i&&this.domChange(e,t,i)}}),g("props",{baseTag:"for",dataMap:a.map({getTgt:g.props.dataMap.getTgt,obsSrc(e,t,n){if(n.change==="set"){for(var r=e.tgt,i=r.length;i--&&r[i].key!==n.path;);i===-1?n.path&&!n.remove&&l(r).insert({key:n.path,prop:n.value}):n.remove?l(r).remove(i):l(r[i]).setProperty("prop",n.value)}},obsTgt(e,t,n){let r; const i=e.src; const o=n.change;o==="set"?n.path==="prop"?l(i).setProperty(t.target.key,n.value):(l(i).removeProperty(n.oldValue),l(i).setProperty(n.value,t.target.prop)):o==="remove"?(r=n.items[0],l(i).removeProperty(r.key),delete i[r.key]):o==="insert"&&(r=n.items[0]).key&&l(i).setProperty(r.key,r.prop)},tgtFlt(e){return e.indexOf(".")<0}}),flow:!0}),re(t,{view:ot=function(e,n,r){function i(e,t){if(e)for(s=cn(e,t,kt),u=0,c=s.length;u<c&&(!(a=ut[s[u].id])||!(a=a&&r?a.get(!0,r):a));u++);}n!==!!n&&(r=n,n=void 0);let a; let s; let l; let u; let c; let p; let f; let h=0; const d=document.body;if(e&&e!==d&&o._.useKey>1&&(e=`${e}`===e?t(e)[0]:e.jquery?e[0]:e)){if(n){if(i(e._df,!0),!a)for(p=(f=Rt?e.querySelectorAll(At):t(At,e).get()).length,l=0;!a&&l<p;l++)i(f[l]);return a}for(;e;){if(s=cn(e,void 0,Ft))for(p=s.length;p--;)if((a=s[p]).open){if(h<1)return(a=ut[a.id])&&r?a.get(r):a||o;h--}else h++;e=e.previousSibling||e.parentNode}}return o},link:rn,unlink:En,cleanData(e){e.length&&Ct&&yn(e),Nt.apply(t,arguments)}}),re(t.fn,{link(e,t,n,r,i,o,a){return rn(e,this,t,n,r,i,o,a)},unlink(){return En(this)},view(e,t){return ot(this[0],e,t)}}),t.each([H,"replaceWith","empty","remove"],((e,n) =>{const r=t.fn[n];t.fn[n]=function(){let e;Ct=1;try{e=r.apply(this,arguments)}finally{Ct=0}return e}})),An(re(o=v.topView,{tmpl:{links:{}}})),ut={0:o},a.getCtx=function(e){return e&&e._cp&&(e=e[1](e[0].data,e[0],v)),e},v._cp=function(e,t,n){if(n.linked){t=`${I}:${t}${T}`;const r=n.tmpl; const i=o.tmpl.links; let a=i[t];a||(i[t]=a=v.tmplFn(t,r,!0)),(e=[n,a])._cp=!0}return e},v._ceo=function e(t){let n; let r=t; let i=t.length;if(i)for(r=[];i--;)(n=t[i])._jsv&&((n=re({},n)).prm=e(n.prm)),r.unshift(n);return r},v._gccb=function(e){return function(t,n,r){let i; let o; let a; let s; let l; let u; let p;if(e&&t){if(t._jsv)return t._jsv.call(e.tmpl,n,e,v);if(t.charAt(0)==="~")return t.slice(0,4)==="~tag"&&(o=e.ctx,t.charAt(4)==="."&&(i=t.slice(5).split("."),o=o.tag),i)?o?[o,i.join("."),n]:[]:(t=t.slice(1).split("."),(s=e.hlp(l=t.shift(),!0))&&(s._cp?(t.length&&(u=`.${t.join(".")}`,(l=s[p=s.length-1])._jsv?(l.sb=u,l.bnd=!!r):(s[p]=(l+u).replace("#data.",""),l.slice(0,5)==="#view"&&(s[p]=s[p].slice(6),s.splice(p,0,e)))),a=[s]):(t.length||c(s))&&(a=[s,t.join("."),n])),a||[]);if(t.charAt(0)==="#")return t==="#data"?[]:[e,t.replace(jt,""),n]}}},ct=v.advSet,v.advSet=function(){ct.call(v),e._jsv=y._jsv?re(e._jsv||{},{views:ut,bindings:Ut}):void 0,at=y.linkAttr,st=`${At},[${at}]`,(lt=y._wm).optgroup=lt.option,lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead,lt.th=lt.td},m.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:t.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from(e){return e.type===vt?e.checked:e.value},to:"value"},textarea:Ot,select:Ot,optgroup:{to:"label"}}}),t},i=window,o=a,e.exports=o?r(i,o):function(e){return r(i,e)}},6947(e){typeof self!=="undefined"&&self,e.exports=function(e){const t={};function n(r){if(t[r])return t[r].exports;const i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){typeof Symbol!=="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&typeof e==="object"&&e&&e.__esModule)return e;const r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&typeof e!=="string")for(const i in e)n.d(r,i,((t) =>e[t]).bind(null,i));return r},n.n=function(e){const t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){function r(e){for(const n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(9)),r(n(10)),r(n(11)),r(n(12)),r(n(13)),r(n(14)),r(n(15)),r(n(16)),r(n(17)),r(n(31)),r(n(32)),r(n(33)),r(n(34)),r(n(35)),r(n(38)),r(n(39)),r(n(40)),r(n(41)),r(n(42)),r(n(43)),r(n(44)),r(n(45)),r(n(46)),r(n(47)),r(n(48)),r(n(49)),r(n(50)),r(n(3))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOOKMARKING="oa:bookmarking",e.CLASSIFYING="oa:classifying",e.COMMENTING="oa:commenting",e.DESCRIBING="oa:describing",e.EDITING="oa:editing",e.HIGHLIGHTING="oa:highlighting",e.IDENTIFYING="oa:identifying",e.LINKING="oa:linking",e.MODERATING="oa:moderating",e.PAINTING="sc:painting",e.QUESTIONING="oa:questioning",e.REPLYING="oa:replying",e.TAGGING="oa:tagging",e.TRANSCRIBING="oad:transcribing"}(t.AnnotationMotivation||(t.AnnotationMotivation={})),function(e){e.AUTO_ADVANCE="auto-advance",e.CONTINUOUS="continuous",e.FACING_PAGES="facing-pages",e.HIDDEN="hidden",e.INDIVIDUALS="individuals",e.MULTI_PART="multi-part",e.NO_NAV="no-nav",e.NON_PAGED="non-paged",e.PAGED="paged",e.REPEAT="repeat",e.SEQUENCE="sequence",e.THUMBNAIL_NAV="thumbnail-nav",e.TOGETHER="together",e.UNORDERED="unordered"}(t.Behavior||(t.Behavior={})),function(e){e.CANVAS="canvas",e.CHOICE="choice",e.OA_CHOICE="oa:choice",e.CONTENT_AS_TEXT="contentastext",e.DATASET="dataset",e.DOCUMENT="document",e.IMAGE="image",e.MODEL="model",e.MOVING_IMAGE="movingimage",e.PDF="pdf",e.PHYSICAL_OBJECT="physicalobject",e.SOUND="sound",e.TEXT="text",e.TEXTUALBODY="textualbody",e.VIDEO="video"}(t.ExternalResourceType||(t.ExternalResourceType={})),function(e){e.ANNOTATION="annotation",e.CANVAS="canvas",e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range",e.SEQUENCE="sequence"}(t.IIIFResourceType||(t.IIIFResourceType={})),function(e){e.AUDIO_MP4="audio/mp4",e.CORTO="application/corto",e.DICOM="application/dicom",e.DRACO="application/draco",e.EPUB="application/epub+zip",e.GLB="model/gltf-binary",e.GLTF="model/gltf+json",e.IIIF_PRESENTATION_2='application/ld+json;profile="http://iiif.io/api/presentation/2/context.json"',e.IIIF_PRESENTATION_3='application/ld+json;profile="http://iiif.io/api/presentation/3/context.json"',e.JPG="image/jpeg",e.M3U8="application/vnd.apple.mpegurl",e.MP3="audio/mp3",e.MPEG_DASH="application/dash+xml",e.OBJ="text/plain",e.OPF="application/oebps-package+xml",e.PDF="application/pdf",e.PLY="application/ply",e.THREEJS="application/vnd.threejs+json",e.USDZ="model/vnd.usd+zip",e.VIDEO_MP4="video/mp4",e.WEBM="video/webm"}(t.MediaType||(t.MediaType={})),function(e){e.DOC="application/msword",e.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.PDF="application/pdf"}(t.RenderingFormat||(t.RenderingFormat={})),function(e){e.IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",e.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",e.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",e.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",e.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",e.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",e.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",e.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",e.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",e.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",e.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",e.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",e.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",e.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",e.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",e.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",e.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",e.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",e.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",e.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",e.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",e.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",e.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",e.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",e.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",e.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",e.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",e.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",e.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",e.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",e.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",e.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",e.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",e.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",e.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",e.SEARCH_0="http://iiif.io/api/search/0/search",e.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",e.SEARCH_1="http://iiif.io/api/search/1/search",e.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",e.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",e.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",e.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",e.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",e.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",e.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json"}(t.ServiceProfile||(t.ServiceProfile={})),function(e){e.BOTTOM_TO_TOP="bottom-to-top",e.LEFT_TO_RIGHT="left-to-right",e.RIGHT_TO_LEFT="right-to-left",e.TOP_TO_BOTTOM="top-to-bottom"}(t.ViewingDirection||(t.ViewingDirection={})),function(e){e.CONTINUOUS="continuous",e.INDIVIDUALS="individuals",e.NON_PAGED="non-paged",e.PAGED="paged",e.TOP="top"}(t.ViewingHint||(t.ViewingHint={}))},function(e,t,n){const r=n(21).Symbol;e.exports=r},function(e,t,n){const r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(((i,o) =>{function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){let t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(((e) =>{e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}; const i=this&&this.__generator||function(e,t){let n; let r; let i; let o; let a={label:0,sent(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){a=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(o[0]===6&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=n(1); const s=n(36);n(37);const l=function(){function e(){}return e.getMediaType=function(e){return(e=(e=e.toLowerCase()).split(";")[0]).trim()},e.getImageQuality=function(e){return e===a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_LEVEL_1||e===a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_LEVEL_2||e===a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2?"native":"default"},e.getInexactLocale=function(e){return e.indexOf("-")!==-1?e.substr(0,e.indexOf("-")):e},e.getLocalisedValue=function(e,t){if(!Array.isArray(e))return e;for(var n=0;n<e.length;n++){const r=e[n];if(t===r["@language"])return r["@value"]}const i=t.substr(0,t.indexOf("-"));for(n=0;n<e.length;n++){const o=e[n];if(o["@language"]===i)return o["@value"]}return null},e.generateTreeNodeIds=function(t,n){let r;void 0===n&&(n=0),r=t.parentNode?`${t.parentNode.id}-${n}`:"0",t.id=r;for(let i=0;i<t.nodes.length;i++){const o=t.nodes[i];e.generateTreeNodeIds(o,i)}},e.normaliseType=function(e){return(e=(e||"").toLowerCase()).indexOf(":")!==-1?e.split(":")[1]:e},e.normaliseUrl=function(e){return(e=e.substr(e.indexOf("://"))).indexOf("#")!==-1&&(e=e.split("#")[0]),e},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.isLevel0ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0))},e.isLevel1ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1))},e.isLevel2ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.parseManifest=function(e,t){return o.Deserialiser.parse(e,t)},e.checkStatus=function(e){if(e.ok)return e;const t=new Error(e.statusText);return t.response=e,Promise.reject(t)},e.loadManifest=function(t){return new Promise(((n,r) =>{fetch(t).then(e.checkStatus).then(((e) =>e.json())).then(((e) =>{n(e)})).catch(((e) =>{r()}))}))},e.loadExternalResourcesAuth1=function(t,n,r,i,o,a,s,l){return new Promise(((u,c) =>{const p=t.map(((t) =>e.loadExternalResourceAuth1(t,n,r,i,o,a,s,l)));Promise.all(p).then((() =>{u(t)})).catch(((e) =>{c(e)}))}))},e.loadExternalResourceAuth1=function(t,n,o,a,l,u,c,p){return r(this,void 0,void 0,(function(){let r;return i(this,((i) =>{switch(i.label){case 0:return[4,a(t)];case 1:return(r=i.sent())?[4,t.getData(r)]:[3,6];case 2:return i.sent(),t.status!==s.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,o,l,u,c,p)];case 4:i.sent(),i.label=5;case 5:if(t.status===s.OK||t.status===s.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return i.sent(),t.status!==s.MOVED_TEMPORARILY&&t.status!==s.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,n,o,l,u,c,p)];case 8:i.sent(),i.label=9;case 9:if(t.status===s.OK||t.status===s.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}}))}))},e.doAuthChain=function(t,n,o,a,l,u,c){return r(this,void 0,void 0,(function(){let r; let p; let f; let h; let d; let g; let v; let _;return i(this,((i) =>{switch(i.label){case 0:return t.isAccessControlled()?((r=t.externalService)&&(r.options=t.options),(p=t.kioskService)&&(p.options=t.options),(f=t.clickThroughService)&&(f.options=t.options),(h=t.loginService)&&(h.options=t.options),t.isResponseHandled||t.status!==s.MOVED_TEMPORARILY?[3,2]:[4,u(t)]):[2,t];case 1:case 3:case 6:case 10:case 14:return i.sent(),[2,t];case 2:return d=null,g=null,(d=r)?(g=d,[4,e.attemptResourceWithToken(t,o,d)]):[3,4];case 4:return(d=p)?(g=d,(v=n(d))?[4,a(v)]:[3,7]):[3,7];case 5:case 9:case 13:return i.sent(),[4,e.attemptResourceWithToken(t,o,d)];case 7:return(d=f)?(g=d,[4,l(t,d)]):[3,11];case 8:return(_=i.sent())?[4,a(_)]:[3,11];case 11:return(d=h)?(g=d,[4,l(t,d)]):[3,15];case 12:return(_=i.sent())?[4,a(_)]:[3,15];case 15:return g&&c(t,g),[2]}}))}))},e.attemptResourceWithToken=function(e,t,n){return r(this,void 0,void 0,(function(){let r; let o;return i(this,((i) =>{switch(i.label){case 0:return(r=n.getService(a.ServiceProfile.AUTH_1_TOKEN))?[4,t(e,r)]:[3,3];case 1:return(o=i.sent())&&o.accessToken?[4,e.getData(o)]:[3,3];case 2:return i.sent(),[2,e];case 3:return[2]}}))}))},e.loadExternalResourcesAuth09=function(t,n,r,i,o,a,s,l,u,c){return new Promise(((p,f) =>{const h=t.map(((t) =>e.loadExternalResourceAuth09(t,n,r,i,o,a,s,l,u,c)));Promise.all(h).then((() =>{p(t)})).catch(((e) =>{f(e)}))}))},e.loadExternalResourceAuth09=function(t,n,r,i,o,a,l,u,c,p){return new Promise(((f,h) =>{p&&p.pessimisticAccessControl?t.getData().then((() =>{t.isAccessControlled()?t.clickThroughService?(f(r(t)),f(i(t))):o(t).then((() =>{a(t,!0).then(((n) =>{t.getData(n).then((() =>{f(c(t))})).catch(((t) =>{h(e.createInternalServerError(t))}))})).catch(((t) =>{h(e.createInternalServerError(t))}))})).catch(((t) =>{h(e.createInternalServerError(t))})):f(t)})).catch(((t) =>{h(e.createInternalServerError(t))})):u(t,n).then(((p) =>{p?t.getData(p).then((() =>{t.status===s.OK?f(c(t)):e.authorize(t,n,r,i,o,a,l,u).then((() =>{f(c(t))})).catch(((t) =>{h(e.createAuthorizationFailedError())}))})).catch(((t) =>{h(e.createAuthorizationFailedError())})):e.authorize(t,n,r,i,o,a,l,u).then((() =>{f(c(t))})).catch(((t) =>{h(e.createAuthorizationFailedError())}))})).catch(((t) =>{h(e.createAuthorizationFailedError())}))}))},e.createError=function(e,t){const n=new Error;return n.message=t,n.name=String(e),n},e.createAuthorizationFailedError=function(){return e.createError(o.StatusCode.AUTHORIZATION_FAILED,"Authorization failed")},e.createRestrictedError=function(){return e.createError(o.StatusCode.RESTRICTED,"Restricted")},e.createInternalServerError=function(t){return e.createError(o.StatusCode.INTERNAL_SERVER_ERROR,t)},e.authorize=function(t,n,r,i,o,a,l,u){return new Promise(((c,p) =>{t.getData().then((() =>{t.isAccessControlled()?u(t,n).then(((u) =>{u?t.getData(u).then((() =>{t.status===s.OK?c(t):e.showAuthInteraction(t,n,r,i,o,a,l,c,p)})).catch(((t) =>{p(e.createInternalServerError(t))})):a(t,!1).then(((u) =>{u?l(t,u,n).then((() =>{t.getData(u).then((() =>{t.status===s.OK?c(t):e.showAuthInteraction(t,n,r,i,o,a,l,c,p)})).catch(((t) =>{p(e.createInternalServerError(t))}))})).catch(((t) =>{p(e.createInternalServerError(t))})):e.showAuthInteraction(t,n,r,i,o,a,l,c,p)}))})).catch(((t) =>{p(e.createInternalServerError(t))})):c(t)}))}))},e.showAuthInteraction=function(t,n,r,i,o,a,l,u,c){t.status!==s.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?r(t).then((() =>{a(t,!0).then(((r) =>{l(t,r,n).then((() =>{t.getData(r).then((() =>{u(t)})).catch(((t) =>{c(e.createInternalServerError(t))}))})).catch(((t) =>{c(e.createInternalServerError(t))}))})).catch(((t) =>{c(e.createInternalServerError(t))}))})):o(t).then((() =>{a(t,!0).then(((r) =>{l(t,r,n).then((() =>{t.getData(r).then((() =>{u(t)})).catch(((t) =>{c(e.createInternalServerError(t))}))})).catch(((t) =>{c(e.createInternalServerError(t))}))})).catch(((t) =>{c(e.createInternalServerError(t))}))})):u(t)},e.getService=function(e,t){for(let n=this.getServices(e),r=0;r<n.length;r++){const i=n[r];if(i.getProfile()===t)return i}return null},e.getResourceById=function(t,n){return e.traverseAndFind(t.__jsonld,"@id",n)},e.traverseAndFind=function(t,n,r){if(t.hasOwnProperty(n)&&t[n]===r)return t;for(let i=0;i<Object.keys(t).length;i++)if(typeof t[Object.keys(t)[i]]==="object"){const o=e.traverseAndFind(t[Object.keys(t)[i]],n,r);if(o!=null)return o}},e.getServices=function(t,n){const r=void 0===n?{}:n; const i=r.onlyService; const a=void 0!==i&&i; const s=r.onlyServices; const l=void 0!==s&&s; const u=r.skipParentResources; const c=[];(void 0===u||!u)&&t&&t.options&&t.options.resource&&t.options.resource!==t&&c.push.apply(c,e.getServices(t.options.resource,{onlyServices:!0}));let p=l?[]:(t.__jsonld||t).service||[];if(Array.isArray(p)||(p=[p]),a||p.push.apply(p,(t.__jsonld||t).services||[]),p.length===0)return c;for(let f=0;f<p.length;f++){const h=p[f];if(typeof h==="string"){const d=this.getResourceById(t.options.resource,h);d&&c.push(new o.Service(d.__jsonld||d,t.options))}else c.push(new o.Service(h,t.options))}return c},e.getTemporalComponent=function(e){const t=/t=([^&]+)/g.exec(e); let n=null;return t&&t[1]&&(n=t[1].split(",")),n},e}();t.Utils=l},function(e,t,n){const r=n(19); const i=n(20);e.exports=function e(t,n,o,a,s){let l=-1; const u=t.length;for(o||(o=i),s||(s=[]);++l<u;){const c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},function(e,t){e.exports=function(e){return e!=null&&typeof e==="object"}},function(e,t,n){n.r(t),t.default=function(e,t){return t=t||{},new Promise(((n,r) =>{const i=new XMLHttpRequest; const o=[]; const a=[]; const s={}; const l=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text(){return Promise.resolve(i.responseText)},json(){return Promise.resolve(JSON.parse(i.responseText))},blob(){return Promise.resolve(new Blob([i.response]))},clone:l,headers:{keys(){return o},entries(){return a},get(e){return s[e.toLowerCase()]},has(e){return e.toLowerCase()in s}}}};for(const u in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,((e,t,n) =>{o.push(t=t.toLowerCase()),a.push([t,n]),s[t]=s[t]?`${s[t]},${n}`:n})),n(l())},i.onerror=r,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(u,t.headers[u]);i.send(t.body||null)}))}},function(e,t,n){e.exports=n(8)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(const n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(0));const r=n(3);t.loadManifest=function(e){return r.Utils.loadManifest(e)},t.parseManifest=function(e,t){return r.Utils.parseManifest(e,t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=function(){function e(e){this.__jsonld=e,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return e.prototype.getProperty=function(e){let t=null;return this.__jsonld&&((t=this.__jsonld[e])||(t=this.__jsonld[`@${e}`])),t},e}();t.JSONLDResource=r},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=n(1); const s=function(e){function t(t,n){const r=e.call(this,t)||this;return r.options=n,r}return i(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){const e=this.getProperty("label");return e?o.PropertyValue.parse(e,this.options.locale):new o.PropertyValue([],this.options.locale)},t.prototype.getDefaultLabel=function(){return this.getLabel().getValue(this.options.locale)},t.prototype.getMetadata=function(){const e=this.getProperty("metadata"); const t=[];if(!e)return t;for(let n=0;n<e.length;n++){const r=e[n]; const i=new o.LabelValuePair(this.options.locale);i.parse(r),t.push(i)}return t},t.prototype.getRendering=function(e){for(let t=this.getRenderings(),n=0;n<t.length;n++){const r=t[n];if(r.getFormat()===e)return r}return null},t.prototype.getRenderings=function(){let e; const t=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return t;Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++){const r=e[n];t.push(new o.Rendering(r,this.options))}return t},t.prototype.getRequiredStatement=function(){let e=null; const t=this.getProperty("requiredStatement");return t&&(e=new o.LabelValuePair(this.options.locale)).parse(t),e},t.prototype.getService=function(e){return o.Utils.getService(this,e)},t.prototype.getServices=function(){return o.Utils.getServices(this)},t.prototype.getThumbnail=function(){let e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new o.Thumbnail(e,this.options):null},t.prototype.isAnnotation=function(){return this.getIIIFResourceType()===a.IIIFResourceType.ANNOTATION},t.prototype.isCanvas=function(){return this.getIIIFResourceType()===a.IIIFResourceType.CANVAS},t.prototype.isCollection=function(){return this.getIIIFResourceType()===a.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===a.IIIFResourceType.MANIFEST},t.prototype.isRange=function(){return this.getIIIFResourceType()===a.IIIFResourceType.RANGE},t.prototype.isSequence=function(){return this.getIIIFResourceType()===a.IIIFResourceType.SEQUENCE},t}(o.JSONLDResource);t.ManifestResource=s},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){const e=this.getProperty("format");return e?e.toLowerCase():null},t.prototype.getResources=function(){const e=[];if(!this.__jsonld.resources)return e;for(let t=0;t<this.__jsonld.resources.length;t++){const n=this.__jsonld.resources[t]; const r=new o.Annotation(n,this.options);e.push(r)}return e},t.prototype.getType=function(){const e=this.getProperty("type");return e?o.Utils.normaliseType(e):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},t.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},t}(o.ManifestResource);t.Resource=a},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=n(1); const s=function(e){function t(t,n){const r=e.call(this,t,n)||this;r.index=-1,r.isLoaded=!1;const i={defaultLabel:"-",locale:"en-GB",resource:r,pessimisticAccessControl:!1};return r.options=Object.assign(i,n),r}return i(t,e),t.prototype.getAttribution=function(){const e=this.getProperty("attribution");return e?o.PropertyValue.parse(e,this.options.locale):new o.PropertyValue([],this.options.locale)},t.prototype.getDescription=function(){const e=this.getProperty("description");return e?o.PropertyValue.parse(e,this.options.locale):new o.PropertyValue([],this.options.locale)},t.prototype.getHomepage=function(){let e=this.getProperty("homepage");return e?typeof e==="string"?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||e.id):null},t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLogo=function(){let e=this.getProperty("logo");if(!e){const t=this.getProperty("provider");if(!t)return null;e=t.logo}return e?typeof e==="string"?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||e.id):null},t.prototype.getLicense=function(){return o.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},t.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},t.prototype.getRelated=function(){return this.getProperty("related")},t.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},t.prototype.getTrackingLabel=function(){const e=this.getService(a.ServiceProfile.TRACKING_EXTENSIONS);return e?e.getProperty("trackingLabel"):""},t.prototype.getDefaultTree=function(){return this.defaultTree=new o.TreeNode("root"),this.defaultTree.data=this,this.defaultTree},t.prototype.getRequiredStatement=function(){let e=null; const t=this.getProperty("requiredStatement");if(t)(e=new o.LabelValuePair(this.options.locale)).parse(t);else{const n=this.getAttribution();n&&((e=new o.LabelValuePair(this.options.locale)).value=n)}return e},t.prototype.isCollection=function(){return this.getIIIFResourceType()===a.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===a.IIIFResourceType.MANIFEST},t.prototype.load=function(){let e=this;return new Promise(((t) =>{if(e.isLoaded)t(e);else{const n=e.options;n.navDate=e.getNavDate();let r=e.__jsonld.id;r||(r=e.__jsonld["@id"]),o.Utils.loadManifest(r).then(((r) =>{e.parentLabel=e.getLabel().getValue(n.locale);const i=o.Deserialiser.parse(r,n);(e=Object.assign(e,i)).index=n.index,t(e)}))}}))},t}(o.ManifestResource);t.IIIFResource=s},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getBody=function(){const e=[]; const t=this.getProperty("body");if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++)if((a=t[n]).items)for(let r=0;r<a.items.length;r++){const i=a.items[r];e.push(new o.AnnotationBody(i,this.options))}else e.push(new o.AnnotationBody(a,this.options));else if(t.items)for(n=0;n<t.items.length;n++){var a=t.items[n];e.push(new o.AnnotationBody(a,this.options))}else e.push(new o.AnnotationBody(t,this.options));return e},t.prototype.getMotivation=function(){return this.getProperty("motivation")||null},t.prototype.getOn=function(){return this.getProperty("on")},t.prototype.getTarget=function(){return this.getProperty("target")},t.prototype.getResource=function(){return new o.Resource(this.getProperty("resource"),this.options)},t}(o.ManifestResource);t.Annotation=a},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){const e=this.getProperty("format");return e?o.Utils.getMediaType(e):null},t.prototype.getType=function(){return this.getProperty("type")?o.Utils.normaliseType(this.getProperty("type")):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t}(o.ManifestResource);t.AnnotationBody=a},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=function(e){function t(t,n,r){const i=e.call(this,n)||this;return i.label=t,i.options=r,i}return i(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){return this.label},t.prototype.getResources=function(){const e=this;return this.getProperty("resources").map(((t) =>new o.Annotation(t,e.options)))},t.prototype.load=function(){const e=this;return new Promise(((t,n) =>{if(e.isLoaded)t(e);else{let r=e.__jsonld.id;r||(r=e.__jsonld["@id"]),o.Utils.loadManifest(r).then(((n) =>{e.__jsonld=n,e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,t(e)})).catch(n)}}))},t}(o.JSONLDResource);t.AnnotationList=a},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getItems=function(){return this.getProperty("items")},t}(n(0).ManifestResource);t.AnnotationPage=o},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}); const o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(1); const s=n(0); const l=o(n(18)); const u=o(n(30)); const c=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getCanonicalImageUri=function(e){let t; let n=null; let r="default"; let i=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])n=this.externalResource.data["@id"],i||(i=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(r="native");else{const o=this.getImages();if(o&&o.length){const a=o[0].getResource(); const l=a.getServices();i||(i=a.getWidth());const u=l?l.find(((e) =>s.Utils.isImageProfile(e.getProfile()))):null;if(u)n=u.id,r=s.Utils.getImageQuality(u.getProfile());else if(i===a.getWidth())return a.id}if(!n){const c=this.getProperty("thumbnail");if(c){if(typeof c==="string")return c;if(c["@id"])return c["@id"];if(c.length)return c[0].id}}}return t=`${i},`,n&&n.endsWith("/")&&(n=n.substr(0,n.length-1)),[n,"full",t,0,`${r}.jpg`].join("/")},t.prototype.getMaxDimensions=function(){let e; let t=null;return this.externalResource&&this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.filter(((e) =>e.maxWidth))[0])&&(t=new s.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),t},t.prototype.getContent=function(){const e=[]; const t=this.__jsonld.items||this.__jsonld.content;if(!t)return e;let n=null;if(t.length&&(n=new s.AnnotationPage(t[0],this.options)),!n)return e;for(let r=n.getItems(),i=0;i<r.length;i++){const o=r[i]; const a=new s.Annotation(o,this.options);e.push(a)}return e},t.prototype.getDuration=function(){return this.getProperty("duration")},t.prototype.getImages=function(){const e=[];if(!this.__jsonld.images)return e;for(let t=0;t<this.__jsonld.images.length;t++){const n=this.__jsonld.images[t]; const r=new s.Annotation(n,this.options);e.push(r)}return e},t.prototype.getIndex=function(){return this.getProperty("index")},t.prototype.getOtherContent=function(){const e=this; const t=(Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")]).filter(((e) =>{return e&&typeof(t=e["@type"])==="string"&&t.toLowerCase()==t.toLowerCase();let t})).map(((t,n) =>new s.AnnotationList(t.label||`Annotation list ${n}`,t,e.options))).map(((e) =>e.load()));return Promise.all(t)},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},Object.defineProperty(t.prototype,"imageResources",{get(){const e=this; const n=u.default([this.getImages().map(((e) =>e.getResource())),this.getContent().map(((e) =>e.getBody()))]);return l.default(n.map(((n) =>{switch(n.getProperty("type").toLowerCase()){case a.ExternalResourceType.CHOICE:case a.ExternalResourceType.OA_CHOICE:return new t({images:l.default([n.getProperty("default"),n.getProperty("item")]).map(((e) =>({resource:e})))},e.options).getImages().map(((e) =>e.getResource()));default:return n}})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resourceAnnotations",{get(){return u.default([this.getImages(),this.getContent()])},enumerable:!0,configurable:!0}),t.prototype.resourceAnnotation=function(e){return this.resourceAnnotations.find(((t) =>t.getResource().id===e||l.default(new Array(t.getBody())).some(((t) =>t.id===e))))},t.prototype.onFragment=function(e){const t=this.resourceAnnotation(e);if(t){const n=t.getProperty("on"); const r=t.getProperty("target"); const i=(n||r).match(/xywh=(.*)$/);if(i)return i[1].split(",").map(((e) =>parseInt(e,10)))}},Object.defineProperty(t.prototype,"iiifImageResources",{get(){return this.imageResources.filter(((e) =>e&&e.getServices()[0]&&e.getServices()[0].id))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageServiceIds",{get(){return this.iiifImageResources.map(((e) =>e.getServices()[0].id))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aspectRatio",{get(){return this.getWidth()/this.getHeight()},enumerable:!0,configurable:!0}),t}(s.Resource);t.Canvas=c},function(e,t,n){const r=n(4);e.exports=function(e){return e!=null&&e.length?r(e,1):[]}},function(e,t){e.exports=function(e,t){for(let n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){const r=n(2); const i=n(24); const o=n(29); const a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){const r=n(22); const i=typeof self==="object"&&self&&self.Object===Object&&self; const o=r||i||Function("return this")();e.exports=o},function(e,t,n){(function(t){const n=typeof t==="object"&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(23))},function(e,t){let n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){typeof window==="object"&&(n=window)}e.exports=n},function(e,t,n){const r=n(25); const i=n(5); const o=Object.prototype; const a=o.hasOwnProperty; const s=o.propertyIsEnumerable; const l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){const r=n(26); const i=n(5);e.exports=function(e){return i(e)&&r(e)=="[object Arguments]"}},function(e,t,n){const r=n(2); const i=n(27); const o=n(28); const a=r?r.toStringTag:void 0;e.exports=function(e){return e==null?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t,n){const r=n(2); const i=Object.prototype; const o=i.hasOwnProperty; const a=i.toString; const s=r?r.toStringTag:void 0;e.exports=function(e){const t=o.call(e,s); const n=e[s];try{e[s]=void 0;var r=!0}catch(e){}const i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){const n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){const n=Array.isArray;e.exports=n},function(e,t,n){const r=n(4);e.exports=function(e){return e!=null&&e.length?r(e,Infinity):[]}},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(1); const a=n(0); const s=function(e){function t(t,n){const r=e.call(this,t,n)||this;return r.items=[],r._collections=null,r._manifests=null,t.__collection=r,r}return i(t,e),t.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.filter(((e) =>e.isCollection()))},t.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.filter(((e) =>e.isManifest()))},t.prototype.getCollectionByIndex=function(e){for(var t,n=this.getCollections(),r=0;r<n.length;r++){const i=n[r];i.index===e&&(t=i)}if(t)return t.options.index=e,t.load();throw new Error("Collection index not found")},t.prototype.getManifestByIndex=function(e){for(var t,n=this.getManifests(),r=0;r<n.length;r++){const i=n[r];i.index===e&&(t=i)}if(t)return t.options.index=e,t.load();throw new Error("Manifest index not found")},t.prototype.getTotalCollections=function(){return this.getCollections().length},t.prototype.getTotalManifests=function(){return this.getManifests().length},t.prototype.getTotalItems=function(){return this.items.length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):o.ViewingDirection.LEFT_TO_RIGHT},t.prototype.getBehavior=function(){let e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=a.Utils.normaliseType(a.TreeNodeType.COLLECTION),this._parseManifests(this),this._parseCollections(this),a.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(let t=0;t<e.getManifests().length;t++){const n=e.getManifests()[t]; const r=n.getDefaultTree();r.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||`manifest ${t+1}`,r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=a.Utils.normaliseType(a.TreeNodeType.MANIFEST),e.defaultTree.addNode(r)}},t.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(let t=0;t<e.getCollections().length;t++){const n=e.getCollections()[t]; const r=n.getDefaultTree();r.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||`collection ${t+1}`,r.navDate=n.getNavDate(),r.data.id=n.id,r.data.type=a.Utils.normaliseType(a.TreeNodeType.COLLECTION),e.defaultTree.addNode(r)}},t}(a.IIIFResource);t.Collection=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=function(){function e(e,t){this.start=e,this.end=t}return e.prototype.getLength=function(){return this.end-this.start},e}();t.Duration=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(0); const i=function(){function e(e){this.defaultLocale=e}return e.prototype.parse=function(e){this.resource=e,this.label=r.PropertyValue.parse(this.resource.label,this.defaultLocale),this.value=r.PropertyValue.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(e){return this.label===null?null:(Array.isArray(e)&&!e.length&&(e=void 0),this.label.getValue(e||this.defaultLocale))},e.prototype.setLabel=function(e){this.label===null&&(this.label=new r.PropertyValue([])),this.label.setValue(e,this.defaultLocale)},e.prototype.getValue=function(e,t){return void 0===t&&(t="<br/>"),this.value===null?null:(Array.isArray(e)&&!e.length&&(e=void 0),this.value.getValue(e||this.defaultLocale,t))},e.prototype.getValues=function(e){return this.value===null?[]:(Array.isArray(e)&&!e.length&&(e=void 0),this.value.getValues(e||this.defaultLocale))},e.prototype.setValue=function(e){this.value===null&&(this.value=new r.PropertyValue([])),this.value.setValue(e,this.defaultLocale)},e}();t.LabelValuePair=i},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return i(t,e),t.getValue=function(e,t){return e.getValue(t,"<br/>")},t.getValues=function(e,t){return e.getValues(t)},t}(Array);t.LanguageMap=o},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}); const o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;const r=Array(e); let i=0;for(t=0;t<n;t++)for(let o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});const a=n(3); const s=function(){function e(e,t,n){void 0===n&&(n="none"),Array.isArray(e)&&e.length===1?this._value=e[0]:this._value=e,t!=="none"&&t!=="@none"||(t=void 0),this._locale=t,this._defaultLocale=n}return e.parseV2Value=function(t,n){return typeof t==="string"?new e(t,void 0,n):t["@value"]?new e(t["@value"],t["@language"],n):null},Object.defineProperty(e.prototype,"value",{get(){return Array.isArray(this._value)?this._value.join("<br/>"):this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get(){return void 0===this._locale?this._defaultLocale:this._locale},enumerable:!0,configurable:!0}),e.prototype.addValue=function(e){Array.isArray(this._value)||(this._value=[this._value]),Array.isArray(e)?this._value=this._value.concat(e):this._value.push(e)},e}();t.LocalizedValue=s;const l=function(e){function t(n,r){void 0===n&&(n=[]);const i=e.apply(this,n)||this;return i.__proto__=t.prototype,i._defaultLocale=r,i}return i(t,e),t.parse=function(e,n){if(!e)return new t([],n);if(Array.isArray(e)){const r=(i=e.map(((e) =>s.parseV2Value(e,n))).filter(((e) =>e!==null))).reduce(((e,t) =>{let n=t._locale;return n||(n="none"),e[n]?e[n].addValue(t._value):e[n]=t,e}),{});return new t(Object.values(r),n)}return typeof e==="string"?new t([new s(e,void 0,n)],n):e["@language"]||e["@value"]?new t((i=s.parseV2Value(e))!==null?[i]:[],n):new t(Object.keys(e).map(((t) =>{const r=e[t];if(!Array.isArray(r))throw new Error("A IIIF v3 localized property value must have an array as the value for a given language.");return new s(r,t,n)})),n);let i},t.prototype.getSuitableLocale=function(e){for(var t=o(this).map(((e) =>e._locale)).filter(((e) =>void 0!==e)),n=function(e){const n=t.find(((t) =>t===e));if(n)return{value:n}},r=0,i=e;r<i.length;r++){const s=n(i[r]);if(typeof s==="object")return s.value}for(let l=function(e){const n=t.find(((t) =>a.Utils.getInexactLocale(t)===a.Utils.getInexactLocale(e)));if(n)return{value:n}},u=0,c=e;u<c.length;u++){const p=l(c[u]);if(typeof p==="object")return p.value}},t.prototype.setValue=function(e,t){let n=void 0;if(t){const r=this.getSuitableLocale([t]);r&&(n=this.find(((e) =>e._locale===r)))}else n=this.find(((e) =>void 0===e._locale));n?n._value=e:this.push(new s(e,t,this._defaultLocale))},t.prototype.getValue=function(e,t){const n=this.getValues(e);return n.length===0?null:t?n.join(t):n[0]},t.prototype.getValues=function(e){if(!this.length)return[];let t;if(t=e?Array.isArray(e)?e:[e]:[],this.length===1&&void 0===this[0]._locale){var n=this[0]._value;return Array.isArray(n)?n:[n]}const r=this.getSuitableLocale(t);if(r)return n=this.find(((e) =>e._locale===r))._value,Array.isArray(n)?n:[n];if(!this.find(((e) =>void 0===e._locale)))return n=this[0]._value,Array.isArray(n)?n:[n];const i=this.find(((e) =>void 0===e._locale));return i?Array.isArray(i._value)?i._value:[i._value]:[]},t}(Array);t.PropertyValue=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511},function(e,t,n){e.exports=window.fetch||(window.fetch=n(6).default||n(6))},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(1); const a=n(0); const s=function(e){function t(t,n){const r=e.call(this,t,n)||this;if(r.index=0,r._allRanges=null,r.items=[],r._topRanges=[],r.__jsonld.structures&&r.__jsonld.structures.length)for(let i=r._getTopRanges(),o=0;o<i.length;o++){const a=i[o];r._parseRanges(a,String(o))}return r}return i(t,e),t.prototype.getPosterCanvas=function(){let e=this.getProperty("posterCanvas");return e&&(e=new a.Canvas(e,this.options)),e},t.prototype.getAccompanyingCanvas=function(){let e=this.getProperty("accompanyingCanvas");return e&&(e=new a.Canvas(e,this.options)),e},t.prototype.getBehavior=function(){let e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=a.Utils.normaliseType(a.TreeNodeType.MANIFEST),!this.isLoaded)return this.defaultTree;const t=this.getTopRanges();return t.length&&t[0].getTree(this.defaultTree),a.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._getTopRanges=function(){const e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(let t=0;t<this.__jsonld.structures.length;t++){const n=this.__jsonld.structures[t];n.viewingHint===o.ViewingHint.TOP&&e.push(n)}if(!e.length){const r={};r.ranges=this.__jsonld.structures,e.push(r)}}return e},t.prototype.getTopRanges=function(){return this._topRanges},t.prototype._getRangeById=function(e){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(let t=0;t<this.__jsonld.structures.length;t++){const n=this.__jsonld.structures[t];if(n["@id"]===e||n.id===e)return n}return null},t.prototype._parseRanges=function(e,t,n){let r; let i=null;if(typeof e==="string"&&(i=e,e=this._getRangeById(i)),e){(r=new a.Range(e,this.options)).parentRange=n,r.path=t,n?n.items.push(r):this._topRanges.push(r);const o=e.items||e.members;if(o)for(var s=0;s<o.length;s++){const l=o[s];if(l["@type"]&&l["@type"].toLowerCase()==="sc:range"||l.type&&l.type.toLowerCase()==="range")this._parseRanges(l,`${t}/${s}`,r);else if(l["@type"]&&l["@type"].toLowerCase()==="sc:canvas"||l.type&&l.type.toLowerCase()==="canvas"){r.canvases||(r.canvases=[]);const u=l.id||l["@id"];r.canvases.push(u)}}else if(e.ranges)for(s=0;s<e.ranges.length;s++)this._parseRanges(e.ranges[s],`${t}/${s}`,r)}else console.warn("Range:",i,"does not exist")},t.prototype.getAllRanges=function(){if(this._allRanges!=null)return this._allRanges;this._allRanges=[];for(var e=this.getTopRanges(),t=function(t){const r=e[t];r.id&&n._allRanges.push(r);const i=function(e,t){e.add(t);const n=t.getRanges();return n.length?n.reduce(i,e):e}; const o=Array.from(r.getRanges().reduce(i,new Set));n._allRanges=n._allRanges.concat(o)},n=this,r=0;r<e.length;r++)t(r);return this._allRanges},t.prototype.getRangeById=function(e){for(let t=this.getAllRanges(),n=0;n<t.length;n++){const r=t[n];if(r.id===e)return r}return null},t.prototype.getRangeByPath=function(e){for(let t=this.getAllRanges(),n=0;n<t.length;n++){const r=t[n];if(r.path===e)return r}return null},t.prototype.getSequences=function(){if(this.items.length)return this.items;const e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(let t=0;t<e.length;t++){const n=e[t]; var r=new a.Sequence(n,this.options);this.items.push(r)}else this.__jsonld.items&&(r=new a.Sequence(this.__jsonld.items,this.options),this.items.push(r));return this.items},t.prototype.getSequenceByIndex=function(e){return this.getSequences()[e]},t.prototype.getTotalSequences=function(){return this.getSequences().length},t.prototype.getManifestType=function(){const e=this.getService(o.ServiceProfile.UI_EXTENSIONS);return e?e.getProperty("manifestType"):a.ManifestType.EMPTY},t.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},t.prototype.isPagingEnabled=function(){const e=this.getViewingHint();if(e)return e===o.ViewingHint.PAGED;const t=this.getBehavior();return!!t&&t===o.Behavior.PAGED},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t}(a.IIIFResource);t.Manifest=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMPTY="",e.MANUSCRIPT="manuscript",e.MONOGRAPH="monograph"}(t.ManifestType||(t.ManifestType={}))},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=n(1); const s=function(e){function t(t,n){const r=e.call(this,t,n)||this;return r._ranges=null,r.canvases=null,r.items=[],r}return i(t,e),t.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},t.prototype.getDuration=function(){if(this.canvases&&this.canvases.length){for(var e=[],t=[],n=0,r=this.canvases;n<r.length;n++)if(d=r[n]){const i=d.match(/(.*)#t=([0-9.]+),?([0-9.]+)?/)||[void 0,d]; const a=i[1]; const s=i[2]; const l=i[3];a&&(e.push(parseFloat(s)),t.push(parseFloat(l)))}if(e.length&&t.length)return new o.Duration(Math.min.apply(Math,e),Math.max.apply(Math,t))}else{e=[],t=[];for(let u=0,c=v=this.getRanges();u<c.length;u++)(_=c[u].getDuration())&&(e.push(_.start),t.push(_.end));if(e.length&&t.length)return new o.Duration(Math.min.apply(Math,e),Math.max.apply(Math,t))}let p; let f;if(this.canvases&&this.canvases.length)for(var h=0;h<this.canvases.length;h++){var d=this.canvases[h]; const g=o.Utils.getTemporalComponent(d);g&&g.length>1&&(h===0&&(p=Number(g[0])),h===this.canvases.length-1&&(f=Number(g[1])))}else{var v=this.getRanges();for(h=0;h<v.length;h++){var _;(_=v[h].getDuration())&&(h===0&&(p=_.start),h===v.length-1&&(f=_.end))}}if(void 0!==p&&void 0!==f)return new o.Duration(p,f)},t.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.filter(((e) =>e.isRange()))},t.prototype.getBehavior=function(){let e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.getTree=function(e){e.data=this,this.treeNode=e;const t=this.getRanges();if(t&&t.length)for(let n=0;n<t.length;n++){const r=t[n]; const i=new o.TreeNode;e.addNode(i),this._parseTreeNode(i,r)}return o.Utils.generateTreeNodeIds(e),e},t.prototype.spansTime=function(e){const t=this.getDuration();return!!(t&&e>=t.start&&e<=t.end)},t.prototype._parseTreeNode=function(e,t){e.label=t.getLabel().getValue(this.options.locale),e.data=t,e.data.type=o.Utils.normaliseType(o.TreeNodeType.RANGE),t.treeNode=e;const n=t.getRanges();if(n&&n.length)for(let r=0;r<n.length;r++){const i=n[r];if(i.getBehavior()!==a.Behavior.NO_NAV){const s=new o.TreeNode;e.addNode(s),this._parseTreeNode(s,i)}}},t}(o.ManifestResource);t.Range=s},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getFormat=function(){return this.getProperty("format")},t}(n(0).ManifestResource);t.Rendering=o},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(1); const a=n(0); const s=function(e){function t(t,n){const r=e.call(this,t,n)||this;return r.items=[],r._thumbnails=null,r}return i(t,e),t.prototype.getCanvases=function(){if(this.items.length)return this.items;const e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var t=0;t<e.length;t++){var n=e[t];(r=new a.Canvas(n,this.options)).index=t,this.items.push(r)}else if(this.__jsonld)for(t=0;t<this.__jsonld.length;t++){var r;n=this.__jsonld[t],(r=new a.Canvas(n,this.options)).index=t,this.items.push(r)}return this.items},t.prototype.getCanvasById=function(e){for(let t=0;t<this.getTotalCanvases();t++){const n=this.getCanvasByIndex(t); const r=a.Utils.normaliseUrl(n.id);if(a.Utils.normaliseUrl(e)===r)return n}return null},t.prototype.getCanvasByIndex=function(e){return this.getCanvases()[e]},t.prototype.getCanvasIndexById=function(e){for(let t=0;t<this.getTotalCanvases();t++)if(this.getCanvasByIndex(t).id===e)return t;return null},t.prototype.getCanvasIndexByLabel=function(e,t){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),t&&(e+="r"));for(var n,r,i,o=/(\d*)\D+(\d*)/,a=0;a<this.getTotalCanvases();a++){const s=this.getCanvasByIndex(a);if(s.getLabel().getValue(this.options.locale)===e)return a;if((n=o.exec(e))&&(r=n[1],(i=n[2])&&new RegExp(`^${r}\\D+${i}$`).test(s.getLabel().toString())))return a}return-1},t.prototype.getLastCanvasLabel=function(e){for(let t=this.getTotalCanvases()-1;t>=0;t--){const n=this.getCanvasByIndex(t).getLabel().getValue(this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(n))return n}else if(n)return n}return this.options.defaultLabel},t.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},t.prototype.getNextPageIndex=function(e,t){let n;if(t){const r=this.getPagedIndices(e); const i=this.getViewingDirection();n=i&&i===o.ViewingDirection.RIGHT_TO_LEFT?r[0]+1:r[r.length-1]+1}else n=e+1;return n>this.getLastPageIndex()?-1:n},t.prototype.getPagedIndices=function(e,t){let n=[];if(t){n=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];const r=this.getViewingDirection();r&&r===o.ViewingDirection.RIGHT_TO_LEFT&&(n=n.reverse())}else n.push(e);return n},t.prototype.getPrevPageIndex=function(e,t){let n;if(t){const r=this.getPagedIndices(e); const i=this.getViewingDirection();n=i&&i===o.ViewingDirection.RIGHT_TO_LEFT?r[r.length-1]-1:r[0]-1}else n=e-1;return n},t.prototype.getStartCanvasIndex=function(){const e=this.getStartCanvas();if(e)for(let t=0;t<this.getTotalCanvases();t++)if(this.getCanvasByIndex(t).id===e)return t;return 0},t.prototype.getThumbs=function(e,t){for(var n=[],r=this.getTotalCanvases(),i=0;i<r;i++){const o=this.getCanvasByIndex(i); const s=new a.Thumb(e,o);n.push(s)}return n},t.prototype.getThumbnails=function(){if(this._thumbnails!=null)return this._thumbnails;this._thumbnails=[];for(let e=this.getCanvases(),t=0;t<e.length;t++){const n=e[t].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},t.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},t.prototype.getTotalCanvases=function(){return this.getCanvases().length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.isCanvasIndexOutOfRange=function(e){return e>this.getTotalCanvases()-1},t.prototype.isFirstCanvas=function(e){return e===0},t.prototype.isLastCanvas=function(e){return e===this.getTotalCanvases()-1},t.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},t.prototype.isPagingEnabled=function(){const e=this.getViewingHint();return!!e&&e===o.ViewingHint.PAGED},t.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},t}(a.ManifestResource);t.Sequence=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(0); const i=function(){function e(){}return e.parse=function(e,t){return typeof e==="string"&&(e=JSON.parse(e)),this.parseJson(e,t)},e.parseJson=function(e,t){let n;if(t&&t.navDate&&!isNaN(t.navDate.getTime())&&(e.navDate=t.navDate.toString()),e["@type"])switch(e["@type"]){case"sc:Collection":n=this.parseCollection(e,t);break;case"sc:Manifest":n=this.parseManifest(e,t);break;default:return null}else switch(e.type){case"Collection":n=this.parseCollection(e,t);break;case"Manifest":n=this.parseManifest(e,t);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,t){const n=new r.Collection(e,t);return t?(n.index=t.index||0,t.resource&&(n.parentCollection=t.resource.parentCollection)):n.index=0,this.parseCollections(n,t),this.parseManifests(n,t),this.parseItems(n,t),n},e.parseCollections=function(e,t){let n;if(e.__jsonld.collections?n=e.__jsonld.collections:e.__jsonld.items&&(n=e.__jsonld.items.filter(((e) =>e.type.toLowerCase()==="collection"))),n)for(let r=0;r<n.length;r++){t&&(t.index=r);const i=this.parseCollection(n[r],t);i.index=r,i.parentCollection=e,e.items.push(i)}},e.parseManifest=function(e,t){return new r.Manifest(e,t)},e.parseManifests=function(e,t){let n;if(e.__jsonld.manifests?n=e.__jsonld.manifests:e.__jsonld.items&&(n=e.__jsonld.items.filter(((e) =>e.type.toLowerCase()==="manifest"))),n)for(let r=0;r<n.length;r++){const i=this.parseManifest(n[r],t);i.index=r,i.parentCollection=e,e.items.push(i)}},e.parseItem=function(e,t){if(e["@type"]){if(e["@type"].toLowerCase()==="sc:manifest")return this.parseManifest(e,t);if(e["@type"].toLowerCase()==="sc:collection")return this.parseCollection(e,t)}else if(e.type){if(e.type.toLowerCase()==="manifest")return this.parseManifest(e,t);if(e.type.toLowerCase()==="collection")return this.parseCollection(e,t)}return null},e.parseItems=function(e,t){const n=e.__jsonld.members||e.__jsonld.items;if(n)for(var r=function(r){t&&(t.index=r);const o=i.parseItem(n[r],t);return o?e.items.filter(((e) =>e.id===o.id))[0]?"continue":(o.index=r,o.parentCollection=e,void e.items.push(o)):{value:void 0}},i=this,o=0;o<n.length;o++){const a=r(o);if(typeof a==="object")return a.value}},e}();t.Deserialiser=i},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=n(0); const a=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getProfile=function(){let e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?e[0]:e},t.prototype.getConfirmLabel=function(){return o.Utils.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},t.prototype.getDescription=function(){return o.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},t.prototype.getFailureDescription=function(){return o.Utils.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},t.prototype.getFailureHeader=function(){return o.Utils.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},t.prototype.getHeader=function(){return o.Utils.getLocalisedValue(this.getProperty("header"),this.options.locale)},t.prototype.getServiceLabel=function(){return o.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},t.prototype.getInfoUri=function(){let e=this.id;return e.endsWith("/")||(e+="/"),`${e}info.json`},t}(o.ManifestResource);t.Service=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.Size=function(e,t){this.width=e,this.height=t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.AUTHORIZATION_FAILED=1]="AUTHORIZATION_FAILED",e[e.FORBIDDEN=2]="FORBIDDEN",e[e.INTERNAL_SERVER_ERROR=3]="INTERNAL_SERVER_ERROR",e[e.RESTRICTED=4]="RESTRICTED"}(t.StatusCode||(t.StatusCode={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});t.Thumb=function(e,t){this.data=t,this.index=t.index,this.width=e;const n=t.getHeight()/t.getWidth();this.height=n?Math.floor(this.width*n):e,this.uri=t.getCanonicalImageUri(e),this.label=t.getLabel().getValue(),this.viewingHint=t.getViewingHint()}},function(e,t,n){let r; const i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});const o=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t}(n(0).Resource);t.Thumbnail=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const r=n(0); const i=function(){function e(e,t){this.label=e,this.data=t||{},this.nodes=[]}return e.prototype.addNode=function(e){this.nodes.push(e),e.parentNode=this},e.prototype.isCollection=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.COLLECTION)},e.prototype.isManifest=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.MANIFEST)},e.prototype.isRange=function(){return this.data.type===r.Utils.normaliseType(r.TreeNodeType.RANGE)},e}();t.TreeNode=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range"}(t.TreeNodeType||(t.TreeNodeType={}))}])},3379:e=>{const t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){const l=e[s]; const u=r.base?l[0]+r.base:l[0]; const c=o[u]||0; const p="".concat(u," ").concat(c);o[u]=c+1;const f=n(p); const h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(f!==-1)t[f].references++,t[f].updater(h);else{const d=i(h,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:d,references:1})}a.push(p)}return a}function i(e,t){const n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){let o=r(e=e||[],i=i||{});return function(e){e=e||[];for(let a=0;a<o.length;a++){const s=n(o[a]);t[s].references--}for(var l=r(e,i),u=0;u<o.length;u++){const c=n(o[u]);t[c].references===0&&(t[c].updater(),t.splice(c,1))}o=l}}},569:e=>{const t={};e.exports=function(e,n){const r=function(e){if(void 0===t[e]){let n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{e.exports=function(e){const t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){const t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){const t=e.insertStyleElement(e);return{update(n){!function(e,t,n){let r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));const i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");const o=n.sourceMap;o&&typeof btoa!=="undefined"&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove(){!function(e){if(e.parentNode===null)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}}]);